{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?3df7","webpack:///./src/util/constants.js","webpack:///./src/util/lz-helpers.js","webpack:///./src/util/metrics.js","webpack:///./src/components/PlotPanes.vue?fc85","webpack:///./src/components/ExportData.vue?d2ee","webpack:///./src/components/TabulatorTable.vue?fee2","webpack:///src/components/TabulatorTable.vue","webpack:///./src/components/TabulatorTable.vue?5aca","webpack:///./src/components/TabulatorTable.vue","webpack:///src/components/ExportData.vue","webpack:///./src/components/ExportData.vue?3e85","webpack:///./src/components/ExportData.vue","webpack:///./src/components/LzPlot.vue?3d59","webpack:///src/components/LzPlot.vue","webpack:///./src/components/LzPlot.vue?b4db","webpack:///./src/components/LzPlot.vue","webpack:///./src/components/PhewasMaker.vue?dbc4","webpack:///src/components/PhewasMaker.vue","webpack:///./src/components/PhewasMaker.vue?d7e2","webpack:///./src/components/PhewasMaker.vue?46ee","webpack:///src/components/PlotPanes.vue","webpack:///./src/components/PlotPanes.vue?dc01","webpack:///./src/components/PlotPanes.vue?741b","webpack:///./src/components/GwasToolbar.vue?e4ff","webpack:///./src/components/BatchSpec.vue?657d","webpack:///./src/util/entity-helpers.js","webpack:///src/components/BatchSpec.vue","webpack:///./src/components/BatchSpec.vue?ce39","webpack:///./src/components/BatchSpec.vue","webpack:///./src/components/BatchScroller.vue?6787","webpack:///src/components/BatchScroller.vue","webpack:///./src/components/BatchScroller.vue?5923","webpack:///./src/components/BatchScroller.vue","webpack:///./src/components/GwasParserOptions.vue?18ce","webpack:///src/components/GwasParserOptions.vue","webpack:///./src/components/GwasParserOptions.vue?d27d","webpack:///./src/components/GwasParserOptions.vue?3f5b","webpack:///./src/components/RegionPicker.vue?e30e","webpack:///src/components/RegionPicker.vue","webpack:///./src/components/RegionPicker.vue?ed51","webpack:///./src/components/RegionPicker.vue","webpack:///./src/components/TabixAdder.vue?3857","webpack:///src/components/TabixAdder.vue","webpack:///./src/components/TabixAdder.vue?211c","webpack:///./src/components/TabixAdder.vue","webpack:///src/components/GwasToolbar.vue","webpack:///./src/components/GwasToolbar.vue?5b44","webpack:///./src/components/GwasToolbar.vue","webpack:///src/App.vue","webpack:///./src/App.vue?31f6","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/components/GwasParserOptions.vue?908e","webpack:///./src/components/PlotPanes.vue?88b6","webpack:///./src/components/PhewasMaker.vue?4df8"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","staticClass","_m","directives","rawName","modifiers","_v","attrs","show_instructions","staticStyle","genome_build","known_tracks","on","$event","receiveTrackOptions","updateRegion","ref","base_layout","base_sources","chr","start","end","activateMetrics","_s","Date","getFullYear","staticRenderFns","PORTAL_API_BASE_URL","LD_SERVER_BASE_URL","REGEX_POSITION","REGEX_REGION","DEFAULT_REGION_SIZE","DATA_TYPES","freeze","BED","GWAS","PLINK_LD","LocusZoom","use","credibleSets","tabixSource","intervalTracks","lzParsers","stateUrlMapping","ldrefvar","TabixUrlSource","Adapters","TabixAssociationLZ","records","filter","item","Number","isNaN","add","localzoom_assoc_layer","assoc_tooltip","Layouts","html","namespace","catalog","credset","data_operations","type","from","requires","params","tooltip","label","text","spacing","lines","style","stroke","filters","field","operator","localzoom_assoc_panel","base","min_height","height","data_layers","toolbar","widgets","custom_event_name","position","color","button_html","button_title","layer_name","default_config_display_name","options","display_name","display","point_shape","point_size","scale_function","parameters","field_value","then","else","legend","shape","size","class","breaks","values","renameField","sourceName","replace","createGwasStudyLayout","track_id","assoc","id","title","x","createStudyLayouts","data_type","filename","intervals","Error","createGwasTabixSources","tabix_reader","parser_func","assoc_name","reader","threshold","createStudySources","addPanels","plot","data_sources","panel_options","source_options","forEach","panel_layout","y_index","addPanel","getBasicSources","study_sources","url","source","population","getBasicLayout","initial_state","study_panels","mods","panels","extra","assign","state","activateUserLD","ld_pop_index","findIndex","layout","tag","ld_widget","destroy","update","widget","ld_desc_index","config","menu_html","addWidget","caption","escape","mutate_attrs","show","mutateLayout","applyState","setup_feature_metrics","gtag","event_category","event_label","event","choice","choice_value","_wr","orig","history","args","rv","e","Event","arguments","dispatchEvent","count_region_view","pushState","addEventListener","count_add_track","model","callback","$$v","selected_tab","expression","TABS","PLOT","dynamic_urls","onVariantClick","receivePlot","PHEWAS","has_studies","allow_phewas","slot","tmp_phewas_variant","tmp_phewas_study","tmp_phewas_logpvalue","EXPORT","table_data","subscribeToData","gwas_tracks","$$selectedVal","Array","target","selected","map","val","_value","selected_study","multiple","_l","domProps","_e","exportCSV","table_config","column","dir","table","_t","component","formatSciNotation","cell","dom_id","variant_name","rendered","your_study","display_pvalue","display_logpvalue","base_phewas_layout","base_phewas_sources","batch_mode_active","study_count","max_studies","receiveTabixReader","showMessage","max_region_size","selectRange","activateBatchMode","scopedSlots","_u","fn","updateRegions","batch_region_getter","_q","i_genome_build","batch_mode_regions","message_class","message","composing","region_text","sendRegions","positionToMidRange","region_size","bounds","Math","floor","max","positionToStartRange","padding","parseRegion","spec","range_match","match","single_match","pos","toLocaleString","current_index","goToItem","current_region_display","regions","cancelNavigation","$emit","current_page","PAGES","variant","variant_spec_tab","_uid","chrom_col","index","pos_col","ref_col","alt_col","marker_col","pvalue_col","isArray","is_neg_log_pvalue","_i","$$a","$$el","$$c","checked","$$i","concat","optional","beta_col","stderr_beta_col","is_alt_effect","AF_SPEC","freq","freq_spec_option","count","allele_freq_col","allele_count_col","n_samples_col","isValid","preview","error","log_pvalue","toFixed","beta","stderr_beta","alt_allele_freq","sendOptions","preventDefault","selectRegion","search_results","term","region","proxy","createReader","tabix_mode","updateDisplayName","$forceUpdate","tabix_gz_url","trim","receiveGwasOptions","show_gwas_modal","Sentry","dsn","process","integrations","Vue","render","h","App","$mount"],"mappings":"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","file":"js/app.2aa7ecc7.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12\"},[_vm._m(0),_c('hr'),_c('button',{directives:[{name:\"v-b-toggle\",rawName:\"v-v-b-toggle.instructions\",modifiers:{\"instructions\":true}}],staticClass:\"btn btn-link\"},[_vm._v(\"Instructions\")]),_c('b-collapse',{staticClass:\"mt-1 mb-4\",attrs:{\"id\":\"instructions\",\"visible\":_vm.show_instructions}},[_c('b-card',[_c('div',{staticClass:\"card-text\"},[_c('b-tabs',{attrs:{\"card\":\"\"}},[_c('b-tab',{attrs:{\"title\":\"General\"}},[_c('p',[_vm._v(\"\\n                    If you have found this tool useful, please cite our paper,\\n                    \"),_c('a',{attrs:{\"href\":\"https://doi.org/10.1093/bioinformatics/btab186\",\"target\":\"_blank\"}},[_vm._v(\"LocusZoom.js:\\n                    interactive and embeddable visualization of genetic association study results\")]),_vm._v(\" (Bioinformatics 2021).\\n                  \")]),_c('p',[_vm._v(\"\\n                    LocalZoom is a tool for generating region association plots via the web browser.\\n                    It can be used on any Tabix-indexed file (including those stored on your hard drive), which\\n                    makes it useful for sensitive or confidential data. If you are comfortable uploading\\n                    your data to a server, consider the \"),_c('a',{attrs:{\"href\":\"https://my.locuszoom.org\"}},[_vm._v(\"my.locuszoom.org\")]),_vm._v(\" upload service instead,\\n                    which provides additional annotation features and does not require you to compress or index your data.\\n                    (note that the upload service is limited to files <= 1GB)\\n                    LocalZoom relies on four assumptions:\\n                  \")]),_c('ol',[_c('li',[_vm._v(\"Your data is a text-based, tab-delimited file that has been stored in a compressed format,\\n                    and \"),_c('a',{attrs:{\"href\":\"http://www.htslib.org/doc/tabix.html\"}},[_vm._v(\"indexed using Tabix\")]),_vm._v(\". The\\n                    index file must be in the same path, with the suffix \"),_c('em',[_vm._v(\".tbi\")])]),_c('li',[_vm._v(\"The data is hosted in a place that is reachable by web browser (eg local files\\n                    or a service such as S3)\\n                    \")]),_c('li',[_vm._v(\"If using a remote URL, the host location must support cross-origin byte range requests. (\"),_c('a',{attrs:{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Range_requests#Checking_if_a_server_supports_partial_requests\"}},[_vm._v(\"how\\n                      to check\")]),_vm._v(\") (\"),_c('a',{attrs:{\"href\":\"https://docs.cancergenomicscloud.org/docs/enabling-cross-origin-resource-sharing-cors#CORS\"}},[_vm._v(\"how to configure cloud storage\")]),_vm._v(\")\\n                    \")]),_c('li',[_vm._v(\"Your file contains all of the information required to draw a plot (see individual file format instructions for details).\")])]),_c('p',[_vm._v(\"\\n                    This service is designed to efficiently fetch only the data needed for the plot\\n                    region of interest. Therefore, it cannot generate summary views that would require\\n                    processing the entire file (eg Manhattan plots).\\n                  \")]),_c('p',[_vm._v(\"\\n                    LD and overlay information is based on a specific human genome build (\"),_c('strong',[_vm._v(\"build GRCh37\")]),_vm._v(\"\\n                    or \"),_c('strong',[_vm._v(\"build GRCh38\")]),_vm._v(\" are supported). Exercise caution when interpreting\\n                    plots based on a GWAS with positions from a different build.\\n                  \")]),_c('p',[_vm._v(\"\\n                    Credible sets are\\n                    \"),_c('a',{attrs:{\"href\":\"https://github.com/statgen/gwas-credible-sets/\"}},[_vm._v(\"calculated\")]),_vm._v(\" based on the\\n                    p-values for the displayed region. At the moment this tool does not support\\n                    uploading your own custom credible set annotations.\\n                  \")])]),_c('b-tab',{attrs:{\"title\":\"GWAS\"}},[_c('h3',[_vm._v(\"What data is required?\")]),_c('p',[_vm._v(\"\\n                    LocalZoom can read GWAS summary statistics from many file formats. When you add a\\n                    study, we will attempt to automatically detect the columns for particular fields\\n                    of interest, based on heuristic rules derived from several dozen common programs\\n                    or file formats. The \"),_c('a',{attrs:{\"href\":\"https://my.locuszoom.org/about/#prepare-data\"}},[_vm._v(\"required fields\")]),_vm._v(\"\\n                    are the same as for my.locuszoom.org, a related tool also developed at UMich.\\n                    When you load a file, you will be asked to confirm the auto-determined options.\\n                  \")]),_c('h3',[_vm._v(\"How should I prepare my files?\")]),_c('p',[_vm._v(\"\\n                    We attempt to support many GWAS file formats, and hence there is no single set of\\n                    instructions for everyone. Below is a sample command that may be helpful; it is presented as several commands in\\n                    a sequence, so that it can be run all at once as part of a data preparation workflow (like snakemake).\\n                  \")]),_c('p',[_vm._v(\"\\n                    To support sorting and tabix indexing, your file will need to specify chromosome and position as separate fields, with tab delimiters.\\n                    The example below assumes one header row, with chromosome as column 1 and position as column 2.\\n                  \")]),_c('dl',[_c('dt',[_vm._v(\"Sort file, compress, and tabix-index results\")]),_c('dd',[_vm._v(\"\\n                      Many programs already output summary statistics sorted by chromosome and position. If your tool does not, then you will need to sort the file before creating a tabix index (tabix is a tool that allows someone to query a file for all data in a contiguous genomic region).\\n                      If your data is already sorted, then the \\\"awk\\\" step can be omitted, but you will still need to run \"),_c('i',[_vm._v(\"bgzip\")]),_vm._v(\" and \"),_c('i',[_vm._v(\"tabix\")]),_vm._v(\".\\n                      Assuming that your chromosome is in column 1 and position in column 2, with one header row (skipped in both the awk \\\"NR\\\" command and the tabix --skip-lines flag):\"),_c('br'),_c('code',[_vm._v(\"zcat < summstats.tab.gz | awk 'NR<=1{print $0;next}{print $0| \\\"sort -k1,1V -k2,2n\\\"}' | bgzip -c > summstats.sorted.tab.gz && tabix -s1 -b 2 -e 2 --skip-lines 1 -f summstats.sorted.tab.gz\")]),_c('br')]),_c('dt',[_vm._v(\"(rarely needed) Converting to tab delimiters\")]),_c('dd',[_vm._v(\"\\n                      Most modern GWAS programs output tab-delimited results (in each row, columns are separated via a tab character)- this makes it much easier to use popular generic indexing tools like tabix.\\n                      Some old programs (such as PLINK 1.x) may generate files that use a different character\\n                      (\\\"space delimited\\\" or \\\"fixed width\\\" formats), and append extra spaces to the start and end of a row.\\n                      In the rare case where you need to accommodate such a program, the following command may be helpful to clean up the file format before use:\"),_c('br'),_c('code',[_vm._v(\"cat filename.txt | sed 's/^[[:space:]]*//g' | sed 's/[[:space:]]*$//g' | tr -s ' ' '\\\\t' > > filename.tab\")])])])]),_c('b-tab',{attrs:{\"title\":\"BED files\"}},[_c('p',[_vm._v(\"\\n                    BED files are a \"),_c('a',{attrs:{\"href\":\"https://genome.ucsc.edu/FAQ/FAQformat.html#format1\"}},[_vm._v(\"standard format\")]),_vm._v(\" with 3-12 columns of data.\\n                    The default LocusZoom panel layout for a BED track will use chromosome, position, line name, and (optionally) color\\n                    to draw the plot. Score will be shown as a tooltip field (if present); it may have a different meaning and scale\\n                    depending on the contents of your BED file. As with any LocusZoom track, custom layouts can be created to render data in different ways, or to use more or\\n                    fewer columns based on the data of interest.\\n                  \")]),_c('p',[_vm._v(\"\\n                    The following command is helpful for preparing BED files for use in the browser:\"),_c('br'),_c('code',[_vm._v(\"$ sort -k1,1 -k2,2n input.bed | bgzip > input-sorted.bed.gz && tabix -p bed input-sorted.bed.gz\")]),_c('br'),_vm._v(\"\\n                    Some BED files will have one or more header rows; in this case, modify the tabix command with: \"),_c('code',[_vm._v(\"--skip-lines N\")]),_vm._v(\" (where N is the number of headers).\\n                  \")])]),_c('b-tab',{attrs:{\"title\":\"PLINK 1.9 LD\"}},[_c('h3',[_vm._v(\"Before you begin\")]),_c('p',[_vm._v(\"\\n                    Although PLINK is targeted as a (historically) popular tool for computing LD,\\n                    the file format it generates must be transformed before using in a plot. Read these instructions carefully for help using the data with LocalZoom.\\n                    We presently do not support arbitrary file formats, as this is an area of active innovation and there is no single clear standard.\\n                    We welcome feedback on generally useful improvements; the current process is rather kludgy!\\n                  \")]),_c('h3',[_vm._v(\"Purpose\")]),_c('p',[_vm._v(\"\\n                    Linkage Disequilibrium is an important tool for interpreting LocusZoom.js plots. In order to support viewing any\\n                    region, most LocusZoom.js usages take advantage of the Michigan LD server to calculate region-based LD relative\\n                    to a particular reference variant, based on the well-known 1000G reference panel.\\n                  \")]),_c('p',[_vm._v(\"\\n                    We recognize that the 1000G reference panel (and its sub-populations) is not suited to all cases, especially for\\n                    studies with ancestry-specific results or large numbers of rare variants not represented in a public panel.\\n                    For many groups, \"),_c('a',{attrs:{\"href\":\"https://github.com/statgen/LDServer/\"}},[_vm._v(\"setting up a private LD Server instance\")]),_vm._v(\" is not an option.\\n                    As a fallback, we support parsing a file format derived from PLINK 1.9 `--ld-snp` calculations. Instructions\\n                    for preparing these files are provided below. \"),_c('strong',[_vm._v(\"Due to the potential for very large output files, we only\\n                    support pre-calculated LD relative to one (or a few) LD reference variants; this means that this feature\\n                    requires some advance knowledge of interesting regions in order to be useful.\")]),_vm._v(\" If the user views any\\n                    region that is not near a pre-provided reference variant, they will see grey dots indicating the absence of LD information.\\n                    We have intentionally restricted the demo so that this limitation is clear.\\n                  \")]),_c('h3',[_vm._v(\"How to run PLINK and format output\")]),_c('dl',[_c('dt',[_c('b',[_vm._v(\"Preparing genotype files: harmonizing ID formats\")])]),_c('dd',[_vm._v(\"\\n                      LocusZoom typically calculates LD relative to a variant by EPACTS-format specifier (chrom:pos_ref/alt).\\n                      However, genotype VCF files have no single standard for how variants are identified, which can make it hard to match the requested variant to the actual data.\\n                      Some files are not even internally consistent, which makes it hard to write easy copy-and-paste commands that would work widely\\n                      across files. Your file can be transformed to match the tutorial assumptions via common tool and the command below:\"),_c('br'),_c('code',[_vm._v(\"bcftools annotate -Oz --set-id '%CHROM\\\\:%POS\\\\_%REF\\\\/%ALT' original_vcf.gz > vcfname_epacts_id_format.gz\")]),_c('br'),_c('em',[_vm._v(\"In some rare cases (such as \"),_c('a',{attrs:{\"href\":\"https://www.internationalgenome.org/faq/why-are-there-duplicate-calls-in-the-phase-3-call-set\"}},[_vm._v(\"1000G phase 3\")]),_vm._v(\"), data preparation errors may result in duplicate entries for the same variant. This can break PLINK. A command such as the one below can be used to find these duplicates:\"),_c('br'),_c('code',[_vm._v(\"zcat < vcfname_epacts_id_format.gz | cut -f3 | sort | uniq -d\")]),_c('br'),_vm._v(\"\\n                        They can then be removed using the following command (check the output carefully before using, because reasons for duplicate lines vary widely):\\n                      \")]),_c('br'),_c('code',[_vm._v(\"bcftools norm -Oz --rm-dup all vcfname_epacts_id_format.gz > vcfname_epacts_id_format_rmdups.gz\")])]),_c('dt',[_c('b',[_vm._v(\"Calculating LD relative to reference variants\")])]),_c('dd',[_vm._v(\"\\n                      The command below will calculate LD relative to (several) variants in a 500 kb region centered around each reference variant.\"),_c('br'),_c('code',[_vm._v(\"plink-1.9 --r2 --vcf vcfname_epacts_id_format.gz --ld-window 499999 --ld-window-kb 500 --ld-window-r2 0.0 --ld-snp-list mysnplist.txt\")]),_c('br'),_vm._v(\"\\n\\n                      This command assumes the presence of a file named \"),_c('em',[_vm._v(\"mysnplist.txt\")]),_vm._v(\", which contains a series of rows like the example below:\"),_c('br'),_c('pre',{staticStyle:{\"background\":\"#F4F4F4\"}},[_vm._v(\"16:53842908_G/A\\n16:53797908_C/G\\n16:53809247_G/A\")])]),_c('dt',[_c('b',[_vm._v(\"Preparing the LD output file for use with LocusZoom.js\")])]),_c('dd',[_vm._v(\"\\n                      As of this writing, this tutorial assumes a \\\"list of SNPs\\\" feature that requires PLINK 1.9.x (and is not yet available in newer versions).\\n                      Unfortunately, PLINK's default output format is not compatible with tabix, for historical reasons.\\n                      Transform to a format readable by LocusZoom via the following sequence of commands.\"),_c('br'),_c('code',[_vm._v(\"cat plink.ld | tail -n+2 | sed 's/^[[:space:]]*//g' | sed 's/[[:space:]]*$//g' | tr -s ' ' '\\\\t' | sort -k4,4 -k5,5n | bgzip > plink.ld.tab.gz && tabix -s4 -b5 -e5 plink.ld.tab.gz\")])]),_c('dt',[_c('b',[_vm._v(\"I don't use PLINK; how should my file be formatted?\")])]),_c('dd',[_vm._v(\"\\n                      A custom LD file should be tab-delimited. It should specify a reference variant (\\\"SNP_A\\\") and LD for all others relative to that variant (\\\"SNP_B\\\"). The first two rows will look like the following example, taken from actual PLINK output:\\n                      \"),_c('pre',{staticStyle:{\"background\":\"#F4F4F4\"}},[_vm._v(\"CHR_A\\tBP_A\\tSNP_A\\tCHR_B\\tBP_B\\tSNP_B\\tR2\\n22\\t37470224\\t22:37470224_T/C\\t22\\t37370297\\t22:37370297_T/C\\t0.000178517\")]),_c('em',[_vm._v(\"Note: pre-calculated LD files can easily become very large. We recommend only outputting LD relative to a few target reference variants at a time.\")])])])])],1)],1)])],1)],1)]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12\"},[_c('gwas-toolbar',{attrs:{\"genome_build\":_vm.genome_build,\"max_studies\":6,\"known_tracks\":_vm.known_tracks},on:{\"update:genome_build\":function($event){_vm.genome_build=$event},\"add-tabix-track\":_vm.receiveTrackOptions,\"select-range\":_vm.updateRegion}})],1)]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12\"},[_c('plot-panes',{ref:\"plotWidget\",attrs:{\"base_layout\":_vm.base_layout,\"base_sources\":_vm.base_sources,\"dynamic_urls\":true,\"genome_build\":_vm.genome_build,\"known_tracks\":_vm.known_tracks,\"chr\":_vm.chr,\"start\":_vm.start,\"end\":_vm.end},on:{\"plot-created\":_vm.activateMetrics}})],1)]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12\"},[_c('footer',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(\"\\n           Copyright \"+_vm._s(new Date().getFullYear())+\" \"),_c('a',{attrs:{\"href\":\"https://github.com/statgen\"}},[_vm._v(\"The University of Michigan\\n          Center for Statistical Genetics\")]),_c('br')])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h1',[_c('strong',[_vm._v(\"LocalZoom: Plot your own data with LocusZoom.js\")])])}]\n\nexport { render, staticRenderFns }","const PORTAL_API_BASE_URL = 'https://portaldev.sph.umich.edu/api/v1/';\nconst LD_SERVER_BASE_URL = 'https://portaldev.sph.umich.edu/ld/';\n\nconst REGEX_POSITION = /^(?:chr)?(\\w+)\\s*:\\s*(\\d+)$/;\nconst REGEX_REGION = /^(?:chr)?(\\w+)\\s*:\\s*(\\d+)-(\\d+)$/;\n\nconst DEFAULT_REGION_SIZE = 500000;\n\n// Enum that controls recognized data types, so we can rename/ adjust as needed.\nconst DATA_TYPES = Object.freeze({\n    BED: 'bed',\n    GWAS: 'gwas',\n    PLINK_LD: 'plink_ld',\n});\n\nexport {\n    DATA_TYPES,\n    DEFAULT_REGION_SIZE,\n    REGEX_REGION, REGEX_POSITION,\n    PORTAL_API_BASE_URL, LD_SERVER_BASE_URL,\n};\n","import escape from 'lodash/escape';\nimport LocusZoom from 'locuszoom';\nimport credibleSets from 'locuszoom/esm/ext/lz-credible-sets';\nimport tabixSource from 'locuszoom/esm/ext/lz-tabix-source';\nimport intervalTracks from 'locuszoom/esm/ext/lz-intervals-track';\nimport lzParsers from 'locuszoom/esm/ext/lz-parsers';\n\nimport { PORTAL_API_BASE_URL, LD_SERVER_BASE_URL, DATA_TYPES } from './constants';\n\nLocusZoom.use(credibleSets);\nLocusZoom.use(tabixSource);\nLocusZoom.use(intervalTracks);\nLocusZoom.use(lzParsers);\n\nconst stateUrlMapping = Object.freeze({ chr: 'chrom', start: 'start', end: 'end', ldrefvar: 'ld_variant' });\n\nconst TabixUrlSource = LocusZoom.Adapters.get('TabixUrlSource');\nclass TabixAssociationLZ extends TabixUrlSource {\n    _annotateRecords(records) {\n        // Some GWAS files will include variant rows, even if no pvalue can be calculated.\n        // Eg, EPACTS fills in \"NA\" for pvalue in this case. These rows are not useful for a\n        // scatter plot, and this data source should ignore them.\n        return records.filter((item) => !Number.isNaN(item['log_pvalue']));\n    }\n}\n\nLocusZoom.Adapters.add('TabixAssociationLZ', TabixAssociationLZ);\n\n\nconst localzoom_assoc_layer = function () {\n    const assoc_tooltip = LocusZoom.Layouts.get('tooltip', 'standard_association_with_label');\n    assoc_tooltip.html += `{{#if assoc:beta|is_numeric}}<br>&beta;: <strong>{{assoc:beta|scinotation|htmlescape}}</strong>{{/if}}\n{{#if assoc:stderr_beta|is_numeric}}<br>SE (&beta;): <strong>{{assoc:stderr_beta|scinotation|htmlescape}}</strong>{{/if}}\n{{#if assoc:alt_allele_freq|is_numeric}}<br>Alt. freq: <strong>{{assoc:alt_allele_freq|scinotation|htmlescape}} </strong>{{/if}}\n{{#if assoc:rsid}}<br>rsID: <a href=\"https://www.ncbi.nlm.nih.gov/snp/{{assoc:rsid|htmlescape}}\" target=\"_blank\" rel=\"noopener\">{{assoc:rsid|htmlescape}}</a>{{/if}}\n{{#if credset:posterior_prob}}<br>Posterior probability: <strong>{{credset:posterior_prob|scinotation}}{{/if}}</strong><br>\n\n{{#if catalog:rsid}}<br><a href=\"https://www.ebi.ac.uk/gwas/search?query={{catalog:rsid}}\" target=\"_new\">See hits in GWAS catalog</a>{{/if}}`;\n\n    return LocusZoom.Layouts.get('data_layer', 'association_pvalues', {\n        namespace: { catalog: 'catalog', credset: 'credset' },\n        data_operations: [\n            // This combines many pieces of data into a single cohesive set of records\n            // NOTE: The credset adapter is a legacy item and it is a bit weird\n            {\n                type: 'fetch',\n                from: ['assoc', 'catalog', 'credset(assoc)', 'ld(credset)'],\n            },\n            {\n                name: 'assoc_credset_catalog',\n                type: 'assoc_to_gwas_catalog',\n                requires: ['credset', 'catalog'],\n                params: ['assoc:position', 'catalog:pos', 'catalog:log_pvalue'],\n            },\n            {\n                name: 'credset_plus_ld',\n                type: 'left_match',\n                requires: ['assoc_credset_catalog', 'ld'],\n                params: ['assoc:position', 'ld:position2'],\n            },\n        ],\n        tooltip: assoc_tooltip,\n        label: {\n            text: '{{#if assoc:rsid}}{{assoc:rsid}}{{#else}}{{assoc:variant}}{{/if}}',\n            spacing: 12,\n            lines: { style: { 'stroke-width': '2px', stroke: '#333333', 'stroke-dasharray': '2px 2px' } },\n            filters: [\n                { field: 'lz_show_label', operator: '=', value: true },\n            ],\n            style: { 'font-weight': 'bold' },\n        },\n    });\n}();\n\n\n// Register reusable rendering options for LocalZoom association tracks (a set of combined custom features)\nLocusZoom.Layouts.add('data_layer', 'localzoom_assoc', localzoom_assoc_layer);\n\nconst localzoom_assoc_panel = function () {\n    // LocalZoom renders an association track with several annotations that are not combined anywhere else; we define a custom track\n    const base = LocusZoom.Layouts.get('panel', 'association', {\n        min_height: 300,\n        height: 300,\n        data_layers: [\n            LocusZoom.Layouts.get('data_layer', 'significance'),\n            LocusZoom.Layouts.get('data_layer', 'recomb_rate'),\n            LocusZoom.Layouts.get('data_layer', 'localzoom_assoc'),\n        ],\n    });\n    // Add display options for catalog + credsets\n    base.toolbar.widgets.push({\n        type: 'display_options',\n        custom_event_name: 'widget_association_display_options_choice',\n        position: 'right',\n        color: 'blue',\n        // Below: special config specific to this widget\n        button_html: 'Display options...',\n        button_title: 'Control how plot items are displayed',\n        layer_name: 'associationpvalues',\n        default_config_display_name: 'Default view',\n        options: [\n            {\n                // First dropdown menu item\n                display_name: '95% credible set (boolean)',  // Human readable representation of field name\n                display: {  // Specify layout directives that control display of the plot for this option\n                    point_shape: 'circle',\n                    point_size: 40,\n                    color: {\n                        field: 'credset:is_member',\n                        scale_function: 'if',\n                        parameters: {\n                            field_value: true,\n                            then: '#00CC00',\n                            else: '#CCCCCC',\n                        },\n                    },\n                    legend: [ // Tells the legend how to represent this display option\n                        {\n                            shape: 'circle',\n                            color: '#00CC00',\n                            size: 40,\n                            label: 'In credible set',\n                            class: 'lz-data_layer-scatter',\n                        },\n                        {\n                            shape: 'circle',\n                            color: '#CCCCCC',\n                            size: 40,\n                            label: 'Not in credible set',\n                            class: 'lz-data_layer-scatter',\n                        },\n                    ],\n                },\n            },\n            {\n                display_name: '95% credible set (gradient by contribution)',\n                display: {\n                    point_shape: 'circle',\n                    point_size: 40,\n                    color: [\n                        {\n                            field: 'credset:contrib_fraction',\n                            scale_function: 'if',\n                            parameters: {\n                                field_value: 0,\n                                then: '#777777',\n                            },\n                        },\n                        {\n                            scale_function: 'interpolate',\n                            field: 'credset:contrib_fraction',\n                            parameters: {\n                                breaks: [0, 1],\n                                values: ['#fafe87', '#9c0000'],\n                            },\n                        },\n                    ],\n                    legend: [\n                        {\n                            shape: 'circle',\n                            color: '#777777',\n                            size: 40,\n                            label: 'No contribution',\n                            class: 'lz-data_layer-scatter',\n                        },\n                        {\n                            shape: 'circle',\n                            color: '#fafe87',\n                            size: 40,\n                            label: 'Some contribution',\n                            class: 'lz-data_layer-scatter',\n                        },\n                        {\n                            shape: 'circle',\n                            color: '#9c0000',\n                            size: 40,\n                            label: 'Most contribution',\n                            class: 'lz-data_layer-scatter',\n                        },\n                    ],\n                },\n            },\n            {\n                display_name: 'Label catalog traits',\n                display: {  // Specify layout directives that control display of the plot for this option\n                    label: {\n                        text: '{{catalog:trait}}',\n                        spacing: 6,\n                        lines: {\n                            style: {\n                                'stroke-width': '2px',\n                                'stroke': '#333333',\n                                'stroke-dasharray': '2px 2px',\n                            },\n                        },\n                        filters: [\n                            // Only label points if they are significant for some trait in the catalog, AND in high LD\n                            //  with the top hit of interest\n                            { field: 'catalog:trait', operator: '!=', value: null },\n                            { field: 'catalog:log_pvalue', operator: '>', value: 7.301 },\n                            { field: 'ld:correlation', operator: '>', value: 0.4 },\n                        ],\n                        style: {\n                            'font-size': '12px',\n                            'font-weight': 'bold',\n                            'fill': '#333333',\n                        },\n                    },\n                },\n            },\n        ],\n    });\n    // LocalZoom field names are slightly more verbose than the PortalDev API; rename this field so everything works\n    LocusZoom.Layouts.renameField(base, 'assoc:se', 'assoc:stderr_beta', false);\n    return base;\n}();\n\nLocusZoom.Layouts.add('panel', 'localzoom_assoc', localzoom_assoc_panel);\n\n/**\n * A source name cannot contain special characters (this would break the layout)\n *\n * @param {string} display_name\n * @return {string}\n */\nfunction sourceName(display_name) {\n    // FIXME: incorporate datatype when generating source name; fix various caller locations\n    return display_name.replace(/[^A-Za-z0-9_]/g, '_');\n}\n\n/**\n * Create customized panel layout(s) for a single association study, with functionality from all\n *   of the features selected.\n * @param {string} track_id Internal track ID, expected to be unique across the entire plot.\n * @param {string} display_name\n * @return {*[]}\n */\nfunction createGwasStudyLayout(\n    track_id,\n    display_name,\n) {\n\n    // Override the dataset-specific namespaces, so that each layer knows how to find data\n    const namespace = { assoc: `assoc_${track_id}`, credset: `credset_${track_id}` };\n\n    return [\n        LocusZoom.Layouts.get('panel', 'localzoom_assoc', {\n            id: `association_${track_id}`,\n            namespace,\n            title: { text: display_name },\n        }),\n        LocusZoom.Layouts.get('panel', 'annotation_catalog', {\n            id: `catalog_${track_id}`,\n            namespace,\n            title: {\n                text: `GWAS Catalog hits for ${display_name}`,\n                style: { 'font-size': '150%' },\n                x: 50,\n            },\n        }),\n    ];\n}\n\n/**\n * Create an appropriate layout based on datatype\n */\nfunction createStudyLayouts (data_type, filename, display_name) {\n    const track_id = `${data_type}_${sourceName(filename)}`;\n\n    if (data_type === DATA_TYPES.GWAS) {\n        return createGwasStudyLayout(track_id, display_name);\n    } else if (data_type === DATA_TYPES.BED) {\n        return [\n            LocusZoom.Layouts.get('panel', 'bed_intervals', {\n                id: track_id,\n                namespace: { intervals: track_id },\n                title: { text: display_name },\n            }),\n        ];\n    } else if (data_type === DATA_TYPES.PLINK_LD) {\n        // PLINK LD is overlaid onto the plot, but not shown as its own panel\n        return [];\n    } else {\n        throw new Error('Unrecognized datatype');\n    }\n}\n\n/**\n * Create all the datasources needed to plot a specific assoc study, including study-specific annotations\n * @return Array Return an array of [name, source_config] entries\n */\nfunction createGwasTabixSources(track_id, tabix_reader, parser_func) {\n    const assoc_name = `assoc_${track_id}`;\n    return [\n        [assoc_name, ['TabixAssociationLZ', { reader: tabix_reader, parser_func }]],\n        [ // Always add a credible set source; it won't be called unless used in a layout\n            `credset_${track_id}`, ['CredibleSetLZ', { threshold: 0.95 }],\n        ],\n    ];\n}\n\n/**\n * Create appropriate LocusZoom sources for the study of interest\n * @param data_type\n * @param filename  A unique track identifier (typically the filename). Used to construct the internal datasource ID name.\n * @param tabix_reader\n * @param parser_func\n * @returns {[[string, [string, {reader: *, parser_func: function(string)}]], [string, [string, {threshold: number}]]]|(string|[string, {reader, parser_func: ((function(*): {blockCount: *, score: *, chromStart: *, thickStart: *, chromEnd: *, strand: *, blockSizes: *, name: *, itemRgb: *, blockStarts: *, thickEnd: *, chrom: *})|*)}])[]}\n */\nfunction createStudySources(data_type, tabix_reader, filename, parser_func) {\n    // todo rename to GET from CREATE, for consistency\n    const track_id = `${data_type}_${sourceName(filename)}`;\n    if (data_type === DATA_TYPES.GWAS) {\n        return createGwasTabixSources(track_id, tabix_reader, parser_func);\n    } else if (data_type === DATA_TYPES.BED) {\n        return [\n            [track_id, ['TabixUrlSource', {reader: tabix_reader, parser_func }]],\n        ];\n    } else if (data_type === DATA_TYPES.PLINK_LD) {\n        return [\n            // We are overriding LD in-place, not naming the source instance dynamically based on filename\n            // Replacing the source completely removes what could otherwise be a big unused cache object, and makes it simpler to add new tracks with a stock layout\n            ['ld', ['UserTabixLD', {reader: tabix_reader, parser_func }]],\n        ];\n    } else {\n        throw new Error('Unrecognized datatype');\n    }\n}\n\n\nfunction addPanels(plot, data_sources, panel_options, source_options) {\n    source_options.forEach(([name, options]) => {\n        // If the same name is encountered twice, the new item will override.\n        // Elsewhere in this app, we also check if an item is duplicated and warn the user, so this shouldn't result in files being replaced.\n        // Relaxing the constraint internally allows us to override things like LD with a new source of exactly the same name\n        // TODO: Make more selective after lz-plot is rewritten to be more generic\n        data_sources.add(name, options, true);\n    });\n    panel_options.forEach((panel_layout) => {\n        panel_layout.y_index = -1; // Make sure genes track is always the last one\n        plot.addPanel(panel_layout);\n    });\n}\n\n/**\n * Get configuration for the set of common, non-study-specific datasources used by the plot.\n * Can optionally prepend study-specific sources for convenience when first creating the plot\n */\nfunction getBasicSources(study_sources = []) {\n    return [\n        ...study_sources,\n        // Used by GWAS scatter plots\n        ['recomb', ['RecombLZ', { url: `${PORTAL_API_BASE_URL}annotation/recomb/results/` }]],\n        ['catalog', ['GwasCatalogLZ', { url: `${PORTAL_API_BASE_URL}annotation/gwascatalog/results/` }]],\n        ['ld', ['LDLZ2', { url: LD_SERVER_BASE_URL, source: '1000G', population: 'ALL' }]],\n        // Genes track\n        ['gene', ['GeneLZ', { url: `${PORTAL_API_BASE_URL}annotation/genes/` }]],\n        ['constraint', ['GeneConstraintLZ', { url: 'https://gnomad.broadinstitute.org/api/' }]],\n    ];\n}\n\nfunction getBasicLayout(initial_state = {}, study_panels = [], mods = {}) {\n    const panels = [\n        ...study_panels,\n        LocusZoom.Layouts.get('panel', 'genes'),\n    ];\n\n    const extra = Object.assign({\n        state: initial_state,\n        panels,\n    }, mods);\n    return LocusZoom.Layouts.get('plot', 'standard_association', extra);\n}\n\n/**\n * When user LD is received, update the plot (irreversibly) to activate custom LD features\n * 1. Remove the 1000G \"ld pop\" toolbar button (because those pops aren't relevant for user provided LD)\n * 2. Add a new toolbar button describing the study\n * 3. Tell the plot to use the new LD datasource when rendering anything that uses ld\n * @param {LocusZoom.Plot} plot A reference to the LZ plot instance\n * @param {String} display_name Display name\n */\nfunction activateUserLD(plot, display_name) {\n    const widgets = plot.toolbar.widgets;\n    // Remove the old ld_population toolbar widget if present\n    const ld_pop_index = widgets.findIndex((item) => item.layout.tag === 'ld_population');\n    if (ld_pop_index !== -1) {\n        const ld_widget = widgets[ld_pop_index];\n        ld_widget.destroy();\n        widgets.splice(ld_pop_index, 1);\n        plot.toolbar.update();\n    }\n\n    // Add an LD description if not present\n    const ld_desc_index = widgets.findIndex((item) => item.layout.tag === 'user_ld_description');\n    let widget;\n    if (ld_desc_index !== -1) {\n        widget = widgets[ld_desc_index];\n    } else {\n        const config = {\n            tag: 'user_ld_description',\n            type: 'menu',\n            color: 'blue',\n            position: 'right',\n            button_html: 'USER LD',\n            menu_html: '',\n        };\n        // Awkward API wart- dynamic toolbar needs to modify toolbar in two ways\n        plot.layout.toolbar.widgets.push(config);\n        widget = plot.toolbar.addWidget(config);\n    }\n    // Update the UI help button EVERY time user LD is added, eg let user swap out LD to a different file when they switch regions\n    //  (I'd RATHER they provide LD into all one file for regions, while still being a small file. But let's expect the most kludgy workflows to win)\n    const caption = `This plot is being rendered with user-provided LD. The filename is: <b>${escape(display_name)}</b>`;\n    LocusZoom.Layouts.mutate_attrs(plot.layout, '$..widgets[?(@.tag === \"user_ld_description\")].menu_html', caption);\n    widget.show();\n\n    // Since the LD is swapped out, we need to tell the plot to re-parse data config (LZ caches datasource options until told not to)\n    // Also, Update any UI captions / toolbar widgets\n    plot.mutateLayout();\n    plot.toolbar.update();\n    // Re-render with the new data\n    plot.applyState();\n}\n\nexport {\n    // Basic definitions\n    getBasicSources, getBasicLayout,\n    createStudySources, createStudyLayouts,\n    // Plot manipulation\n    sourceName, activateUserLD, addPanels,\n    // Constants\n    stateUrlMapping,\n};\n","/**\n * Activate basic metrics for LocalZoom deployments\n * This module is primarily imported for its side effects (things it does when the code is first\n *  parsed)\n * Library users will rarely need to use this; it is a convenience for tracking usage as an app\n *\n * This approach allows us to collect metrics without modifying code internals, so that reusable\n *  components don't need to incorporate metrics code. It takes advantage of the fact that dynamic\n *  urls modifies the URL, which is an externally visible action.\n */\n\n/**\n * Set up metrics to track certain features of interest within the LZ plot. This will help us\n *  derive information about which options are commonly used.\n * @param plot\n */\nfunction setup_feature_metrics(plot) {\n    if (!window.gtag) {\n        // If google analytics isn't present, then there is nothing to do here.\n        return;\n    }\n    plot.on('widget_save_png', () => {\n        window.gtag('event', 'save_image', {\n            event_category: 'features',\n            event_label: 'png',\n        });\n    });\n    plot.on('widget_save_svg', () => {\n        window.gtag('event', 'save_image', {\n            event_category: 'features',\n            event_label: 'svg',\n        });\n    });\n    plot.on('widget_gene_filter_choice', (event) => {\n        window.gtag('event', 'filter_genes', {\n            event_category: 'features',\n            event_label: event.data.choice,\n        });\n    });\n    plot.on('widget_association_display_options_choice', (event) => {\n        window.gtag('event', 'association_display_options', {\n            event_category: 'features',\n            event_label: event.data.choice,\n        });\n    });\n    plot.on('widget_set_ldpop', (event) => {\n        window.gtag('event', 'ld_pop', {\n            event_category: 'features',\n            event_label: event.data.choice_value,\n        });\n    });\n    plot.on('set_ldrefvar', (event) => {\n        window.gtag('event', 'ld_refvar', {\n            event_category: 'features',\n        });\n    });\n}\n\n// Hack: create an event we can listen to for `history.pushState` (no native one available)\n// Ref: https://stackoverflow.com/a/25673911/1422268\nconst _wr = function _wr(type) {\n    const orig = window.history[type];\n    return function send_synthetic_event(...args) {\n        const rv = orig.apply(this, args);\n        const e = new Event(type);\n        e.arguments = args;\n        window.dispatchEvent(e);\n        return rv;\n    };\n};\n\n// Expose the count function so it can be called explicitly (eg for initial pageload).\nconst count_region_view = () => {\n    if (window.gtag) {\n        window.gtag('event', 'regionview');\n    }\n};\n\n// Activate some metrics instantly whenever this module is loaded. These rely on events fired by\n//   dynamic URLs and can be measured indirectly without a reference to the plot object.\n// Metrics are only activated when google analytics script is installed\nif (window.gtag) {\n    // Monkey-patching wraps API calls to create a synthetic DOM event: icky, but necessary.\n    window.history.pushState = _wr('pushState');\n\n    // Count all region plots: back button = popstate; new view = pushState\n    // We don't track replaceState, because different pages do not agree on how to load the first\n    //  plot (if we forced one assumption, we might not count \"first pageview\" correctly)\n    //  Eg, a direct link (position already in url) wouldn't need to call replaceState.\n    window.addEventListener('popstate', count_region_view);\n    window.addEventListener('pushState', count_region_view);\n}\n\n/**\n * Report when new tracks/ datatypes are added to the plot, so we can have a rough guess as\n *  to which visualization features get used most.\n * @param data_type\n */\nconst count_add_track = (data_type) => {\n    if (!window.gtag) {\n        return;\n    }\n\n    window.gtag('event', 'add_track', {\n        event_category: 'features',\n        event_label: data_type,\n    });\n};\n\nexport { count_add_track, count_region_view, setup_feature_metrics };\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-card',{attrs:{\"no-body\":\"\"}},[_c('b-tabs',{staticClass:\"flex-nowrap\",staticStyle:{\"min-height\":\"1000px\"},attrs:{\"pills\":\"\",\"card\":\"\",\"vertical\":\"\",\"content-class\":\"scroll-extra\"},model:{value:(_vm.selected_tab),callback:function ($$v) {_vm.selected_tab=$$v},expression:\"selected_tab\"}},[_c('b-tab',{attrs:{\"active\":_vm.selected_tab === _vm.TABS.PLOT,\"title\":\"GWAS\"}},[(_vm.has_studies)?_c('lz-plot',{ref:\"assoc_plot\",attrs:{\"show_loading\":true,\"base_layout\":_vm.base_layout,\"base_sources\":_vm.base_sources,\"chr\":_vm.chr,\"start\":_vm.start,\"end\":_vm.end,\"dynamic_urls\":_vm.dynamic_urls},on:{\"element_clicked\":_vm.onVariantClick,\"connected\":_vm.receivePlot}}):_c('div',{staticClass:\"placeholder-plot\",staticStyle:{\"display\":\"table\"}},[_c('span',{staticClass:\"text-center\",staticStyle:{\"display\":\"table-cell\",\"vertical-align\":\"middle\"}},[_vm._v(\"\\n            Please add data from a tabix file to continue\\n          \")])])],1),_c('b-tab',{attrs:{\"active\":_vm.selected_tab === _vm.TABS.PHEWAS,\"disabled\":!_vm.has_studies || !_vm.allow_phewas}},[_c('template',{slot:\"title\"},[_c('span',{attrs:{\"title\":\"Only available for build GRCh37 datasets\"}},[_vm._v(\"PheWAS\")])]),_c('phewas-maker',{ref:\"phewas\",attrs:{\"variant_name\":_vm.tmp_phewas_variant,\"genome_build\":_vm.genome_build,\"your_study\":_vm.tmp_phewas_study,\"your_logpvalue\":_vm.tmp_phewas_logpvalue,\"allow_render\":_vm.selected_tab === _vm.TABS.PHEWAS}})],2),_c('b-tab',{attrs:{\"active\":_vm.selected_tab === _vm.TABS.EXPORT,\"disabled\":!_vm.has_studies,\"title\":\"Export\"}},[_c('export-data',{attrs:{\"known_tracks\":_vm.known_tracks,\"table_data\":_vm.table_data},on:{\"requested-data\":_vm.subscribeToData}})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12\"},[_c('label',[_vm._v(\"Select a study:\\n        \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selected_study),expression:\"selected_study\"}],staticStyle:{\"width\":\"20em\"},attrs:{\"disabled\":_vm.gwas_tracks.length === 0},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selected_study=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\"(none selected)\")]),_vm._l((_vm.gwas_tracks),function(ref){\nvar filename = ref.filename;\nvar display_name = ref.display_name;\nreturn _c('option',{key:filename,domProps:{\"value\":filename}},[_vm._v(\"\\n            \"+_vm._s(display_name === filename ? display_name : (display_name + \" ({\" + filename + \")\"))+\"\\n          \")])})],2)])])]),(!_vm.selected_study)?_c('p',[_vm._m(0)]):_vm._e(),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12\"},[_c('button',{staticClass:\"btn btn-info float-right\",attrs:{\"disabled\":!_vm.selected_study},on:{\"click\":_vm.exportCSV}},[_vm._v(\"Download\")])])]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12\"},[_c('tabulator-table',{attrs:{\"columns\":_vm.table_config,\"initial-sort\":[{column: 'assoc:log_pvalue', dir: 'desc'}],\"table_data\":_vm.table_data,\"height\":\"500px\",\"placeholder\":\"No data available for selected study in the specified region\"},on:{\"connected\":function($event){_vm.table = $event}}})],1)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticStyle:{\"color\":\"red\"}},[_c('i',[_vm._v(\"Please select a GWAS dataset to use the \\\"export\\\" feature.\")])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{ref:\"table\"},[_vm._t(\"default\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport Tabulator from 'tabulator-tables';\nimport 'tabulator-tables/dist/css/bootstrap/tabulator_bootstrap4.css';\n\nexport default {\n    name: 'TabulatorTable',\n    props: {\n        table_data: { type: Array, default: () => [] },\n        placeholder: { type: String, default: null },\n        columns: { type: Array, default: () => [] },\n        initialSort: { type: Array, default: () => [] },\n        layout: { type: String, default: 'fitData' },\n        layoutColumnsOnNewData: { type: Boolean, default: true },\n        height: { type: String, default: '100%' },\n    },\n    watch: {\n        table_data: {\n            handler(value) {\n                this.tabulator.setData(value);\n            },\n            deep: true,\n        },\n        columns: { // Redefine the table\n            handler(value) {\n                this.tabulator.setColumns(value);\n                this.tabulator.setSort(value);\n            },\n            deep: true,\n        },\n    },\n    beforeCreate() {\n        // DOM-manipulating widgets should store reference statically, not dynamically\n        this.tabulator = null;\n    },\n    mounted() {\n        const { table_data: data, columns, initialSort, layout, layoutColumnsOnNewData, height, placeholder } = this;\n        this.tabulator = new Tabulator(\n            this.$refs.table,\n            { data, columns, initialSort, layout, layoutColumnsOnNewData, height, placeholder },\n        );\n\n        // Expose a reference to the raw table object, for advanced usages such as click events\n        this.$emit('connected', this.tabulator);\n    },\n};\n</script>\n\n<template>\n  <div>\n    <div ref=\"table\"><slot/></div>\n  </div>\n</template>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/source-map-loader/index.js!./TabulatorTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/source-map-loader/index.js!./TabulatorTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TabulatorTable.vue?vue&type=template&id=f64e03b6&\"\nimport script from \"./TabulatorTable.vue?vue&type=script&lang=js&\"\nexport * from \"./TabulatorTable.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\n/**\n * A LocalZoom-specific export widget. This wraps creation of a fields array + table config based\n * on the currently selected dataset. It emits a fields list event\n */\n\nimport LocusZoom from 'locuszoom';\n\nimport { sourceName } from '../util/lz-helpers';\nimport TabulatorTable from './TabulatorTable.vue';\nimport { DATA_TYPES } from '../util/constants';\n\nfunction formatSciNotation(cell, params) {\n    // Tabulator cell formatter using sci notation\n    const value = cell.getValue();\n    if (typeof value !== 'number') {\n        return null;\n    }\n    return LocusZoom.TransformationFunctions.get('scinotation')(value);\n}\n\nexport default {\n    name: 'ExportData',\n    components: { TabulatorTable },\n    props: {\n        known_tracks: { type: Array, default: () => [] },\n        table_data: { type: Array, default: () => [] },\n    },\n    data() {\n        return {\n            selected_study: '',\n            export_type: 'top_hits',\n        };\n    },\n    computed: {\n        source_name() {\n            // FIXME: make source name function consider datatype directly\n            return `gwas_${sourceName(this.selected_study || '')}`;\n        },\n\n        gwas_tracks() {\n            return this.known_tracks.filter(({data_type}) => data_type === DATA_TYPES.GWAS);\n        },\n\n        table_config() {\n            // How should the table display this set of fields? Determined once at component load.\n            const base = [\n                { title: 'Chrom', field: 'assoc:chromosome' },\n                { title: 'Pos', field: 'assoc:position', sorter: 'number' },\n                { title: 'Ref', field: 'assoc:ref_allele' },\n                { title: 'Alt', field: 'assoc:alt_allele' },\n                { title: 'rsID', field: 'assoc:rsid' },\n                {\n                    title: '-log<sub>10</sub>(p)',\n                    field: 'assoc:log_pvalue',\n                    formatter: formatSciNotation,\n                    sorter: 'number',\n                },\n                {\n                    title: '&beta;',\n                    field: 'assoc:beta',\n                    formatter: 'money',\n                    formatterParams: { precision: 3 },\n                    sorter: 'number',\n                },\n                {\n                    title: 'SE(&beta;)',\n                    field: 'assoc:stderr_beta',\n                    formatter: 'money',\n                    formatterParams: { precision: 3 },\n                    sorter: 'number',\n                },\n                {\n                    title: 'Alt freq.',\n                    field: 'assoc:alt_allele_freq',\n                    formatter: 'money',\n                    formatterParams: { precision: 3 },\n                    sorter: 'number',\n                },\n                { title: 'Cred. set', field: 'credset:is_member', formatter: 'tickCross' },\n                { title: 'Posterior probability', field: 'credset:posterior_prob', formatter: formatSciNotation },\n            ];\n            return base;\n        },\n    },\n    watch: {\n        source_name() {\n            // What data should this widget request from the plot?\n            const { source_name } = this;\n\n            if (!this.gwas_tracks.find(({filename: kf}) => kf === this.selected_study)) {\n                // Reset logic: notify external widgets to remove any subscribers\n                this.$emit('requested-data');\n                return;\n            }\n\n            // Side effect in computed: sketchy but convenient. Since panels are consistently named, emit the name oif a panel with the desired data\n            // Request to follow the data from a layer, which automatically takes into account \"get extra data\" options like credsets\n            // FIXME: incorporate datatype into sourcename caller\n            this.$emit('requested-data', `association_${source_name}.associationpvalues`);\n        },\n    },\n    beforeCreate() {\n        // Reference DOM-manipulating pieces as static properties\n        this.table = null;\n    },\n    methods: {\n        exportCSV() {\n            this.table.download('csv', `results_${this.source_name}.csv`);\n        },\n    },\n};\n</script>\n\n<template>\n  <div>\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <label>Select a study:\n          <select\n            v-model=\"selected_study\"\n            :disabled=\"gwas_tracks.length === 0\"\n            style=\"width: 20em;\">\n            <option value=\"\">(none selected)</option>\n            <option\n              v-for=\"{filename, display_name} in gwas_tracks\"\n              :value=\"filename\"\n              :key=\"filename\">\n              {{ display_name === filename ? display_name : `${display_name} ({${filename})` }}\n            </option>\n          </select>\n        </label>\n      </div>\n    </div>\n\n    <p v-if=\"!selected_study\"><span style=\"color: red\"><i>Please select a GWAS dataset to use the \"export\" feature.</i></span></p>\n\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <button\n          :disabled=\"!selected_study\"\n          class=\"btn btn-info float-right\"\n          @click=\"exportCSV\">Download</button>\n      </div>\n    </div>\n\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <tabulator-table\n          :columns=\"table_config\"\n          :initial-sort=\"[{column: 'assoc:log_pvalue', dir: 'desc'}]\"\n          :table_data=\"table_data\"\n          height=\"500px\"\n          placeholder=\"No data available for selected study in the specified region\"\n          @connected=\"table = $event\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/source-map-loader/index.js!./ExportData.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/source-map-loader/index.js!./ExportData.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ExportData.vue?vue&type=template&id=74bd6a44&scoped=true&\"\nimport script from \"./ExportData.vue?vue&type=script&lang=js&\"\nexport * from \"./ExportData.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"74bd6a44\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"lz-container-responsive\",attrs:{\"id\":_vm.dom_id}},[_vm._t(\"default\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\n/**\n * A generic Vue component that wraps imperative LocusZoom code with a declarative Vue API.\n *\n * This can handle any type of plot that LocusZoom supports, including multiple panels and\n *  custom datasources.\n *\n * A key design goal is to avoid situations that could lead to memory leaks- when the component\n *  is removed from the DOM, no outside code should preserve a reference. To achieve this, all\n *  plot manipulation is handled by methods that proxy to the plot. A reference to the plot is not\n *  propagated elsewhere.\n */\n\nimport LocusZoom from 'locuszoom';\nimport { plotUpdatesUrl, plotWatchesUrl } from 'locuszoom/esm/ext/lz-dynamic-urls';\n\nimport { addPanels, stateUrlMapping } from '../util/lz-helpers';\n\nlet uid = 0; // Ensure that every component instance has a unique DOM id, for use by d3\nexport default {\n    name: 'LzPlot',\n    props: {\n        // The initial layout and datasources used to create this LZ instance.\n        base_layout: { type: Object, default: () => ({}) },\n        base_sources: { type: Array, default: () => [] },\n        // Plot region\n        chr: { type: String, default: null },\n        start: { type: Number, default: null },\n        end: { type: Number, default: null },\n\n        show_loading: { type: Boolean, default: false }, // Show loading indicators\n        // Change URL when plot updates. Only one plot on the page should use this.\n        dynamic_urls: { type: Boolean, default: false },\n    },\n    computed: {\n        region() {\n            // make sure that all 3 region properties get updated atomically\n            const { chr, start, end } = this;\n            return { chr, start, end };\n        },\n    },\n    watch: {\n        region: {\n            handler() {\n                // WARNING: this component receives notifications of a value it changes, a design\n                //   quirk that risks infinite update loops.\n                //   Only apply new region information if it has changed\n                const region = Object.assign({}, this.region);\n                const diffs = Object.keys(region).reduce((acc, key) => {\n                    const new_val = region[key];\n                    if (new_val !== this.plot.state[key]) {\n                        acc[key] = new_val;\n                    }\n                    return acc;\n                }, {});\n                if (Object.keys(diffs).length) {\n                    // Only re-render if the passed-in state values would be different\n                    this.plot.applyState(diffs);\n                }\n            },\n            deep: true,\n        },\n    },\n    beforeCreate() {\n        uid += 1;\n        this.dom_id = `lz-plot-${uid}`; // DOM element\n        this.plot_id = this.dom_id.replace(/-/g, '_'); // How to expose the plot instance globally\n\n        // This is important: plot must be assigned as a static property. If it were a field in\n        //  `data`, vue would recursively wrap it as an observable, and Really Bad Things Happen.\n        this.plot = null;\n        this.data_sources = null;\n    },\n    mounted() {\n        this.createLZ(this.base_layout, this.base_sources);\n    },\n    beforeDestroy() {\n        // Clean up plot and event listeners to prevent memory leaks\n        this.plot.destroy();\n        delete this.plot;\n        delete window[this.plot_id];\n    },\n    methods: {\n        /**\n         * Create an LZ plot\n         * @param {object} base_layout\n         * @param {Array[]} base_sources\n         */\n        createLZ(base_layout, base_sources) {\n            // Create and populate the plot\n            // The layout comes from properties assigned to a vue instance, which are automatically\n            //   wrapped (deeply) with Vue observable getters/setters. This can confuse LocusZoom,\n            //   so we will deep-copy to ensure this is just pure JS primitives\n            const layout = JSON.parse(JSON.stringify(base_layout));\n            const data_sources = new LocusZoom.DataSources();\n            base_sources.forEach(([name, config]) => data_sources.add(name, config));\n            const plot = LocusZoom.populate(`#${this.dom_id}`, data_sources, layout);\n\n            if (this.show_loading) {\n                // Add loading indicator to every panel if appropriate\n                plot.layout.panels.forEach((panel) => plot.panels[panel.id].addBasicLoader());\n            }\n\n            // Save references to the plot for manipulation later\n            this.plot = plot;\n            this.data_sources = data_sources;\n            window[this.plot_id] = plot; // TODO: This fits existing usage patterns, but it's icky\n\n            // Expose events to things outside this component\n            // IMPORTANT: never consume this value in a way that would wrap it as an observable\n            //   (eg by assigning it to a field in `data`).\n            this.connectListeners(plot);\n            this.$emit('connected');\n        },\n\n        /**\n         * The component should re-emit (most) plot-level event hooks built in to LocusZoom\n         * @private\n         * @param plot\n         */\n        connectListeners(plot) {\n            plot.on('any_lz_event', (eventData) => this.$emit(eventData.event_name, eventData));\n\n            // Changes in the plot can be reflected in the URL, and vice versa (eg browser back\n            //  button can go back to a previously viewed region).\n            if (this.dynamic_urls) {\n                plotUpdatesUrl(plot, stateUrlMapping);\n                plotWatchesUrl(plot, stateUrlMapping);\n            }\n        },\n\n        /**\n         * Proxy a method from the component to the LZ instance\n         * This allows parent components to manipulate the LZ instance, via $refs, without\n         *  leaking a reference to component internal dom elements\n         * @param {function} callback A callback that receives the plot object and acts upon it.\n         */\n        callPlot(callback) {\n            // Consume return values with caution to avoid leaking internals\n            return callback(this.plot);\n        },\n\n        /**\n         * Proxy a method from the component to the LZ datasources\n         * This allows parent components to manipulate the LZ instance, via $refs, without leaking\n         *  a reference to component internals\n         * @param {function} callback A callback that receives the datasources object and acts upon it.\n         */\n        callSources(callback) {\n            // Consume return values with caution to avoid leaking internals\n            return callback(this.data_sources);\n        },\n\n        addPanels(panel_configs, source_configs) {\n            addPanels(this.plot, this.data_sources, panel_configs, source_configs);\n        },\n    },\n};\n</script>\n\n<template>\n  <div>\n    <div\n      :id=\"dom_id\"\n      class=\"lz-container-responsive\"><slot/></div>\n  </div>\n</template>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/source-map-loader/index.js!./LzPlot.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/source-map-loader/index.js!./LzPlot.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LzPlot.vue?vue&type=template&id=b4c70bf0&\"\nimport script from \"./LzPlot.vue?vue&type=script&lang=js&\"\nexport * from \"./LzPlot.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(!_vm.variant_name || !_vm.rendered)?_c('p',[_vm._v(\"\\n    Please select a variant in order to generate a PheWAS plot. You can click on any scatter plot\\n    point in an association track.\\n  \")]):_c('div',[_c('h3',[_vm._v(\"Known PheWAS Results: \"+_vm._s(_vm.variant_name))]),_c('p',[_vm._v(\"\\n      In your study \"),_c('em',{staticStyle:{\"word-break\":\"break-word\"}},[_vm._v(_vm._s(_vm.your_study))]),_vm._v(\", this variant has a\\n      \"),_c('span',{staticClass:\"text-muted definition\",attrs:{\"title\":(\"p-value \" + _vm.display_pvalue)}},[_vm._v(\"\\n        -log\"),_c('sub',[_vm._v(\"10\")]),_vm._v(\" p-value of \"),_c('strong',[_vm._v(_vm._s(_vm.display_logpvalue))])]),_vm._v(\". Below are other\\n      results for comparison.\\n    \")]),_c('lz-plot',{ref:\"phewas_plot\",attrs:{\"base_layout\":_vm.base_phewas_layout,\"base_sources\":_vm.base_phewas_sources,\"show_loading\":true},on:{\"connected\":_vm.receivePlot}})],1),_vm._m(0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"\\n    PheWAS results are drawn from a large-scale analysis of the UK Biobank dataset, as described in\\n    \"),_c('a',{attrs:{\"href\":\"https://doi.org/10.1038/s41588-018-0184-y\"}},[_vm._v(\"Nature Genetics volume 50, pages 13351341 (2018)\")]),_vm._v(\".\\n  \")])}]\n\nexport { render, staticRenderFns }","<script>\nimport LocusZoom from 'locuszoom';\nimport LzPlot from './LzPlot.vue';\n\nexport default {\n    name: 'PhewasMaker',\n    components: { LzPlot },\n    props: {\n        variant_name: { type: String, default: '' },\n        genome_build: { type: String, default: 'GRCh37' },\n        your_study: { type: String, default: '' },\n        your_logpvalue: { type: Number, default: null },\n        allow_render: { type: Boolean, default: true },\n    },\n    data() {\n        // Track whether phewas tab was rendered at least once. Don't draw this plot if no one looks\n        // METHOD: 1. if allow_render true, then make initial plot\n        // Updates are based on a synthetic property\n\n        // allow_render || rendered (for lz-plot to show)\n        return { rendered: this.allow_render };\n    },\n    computed: {\n        display_logpvalue() {\n            return LocusZoom.TransformationFunctions.get('scinotation')(this.your_logpvalue);\n        },\n        display_pvalue() {\n            const log = this.your_logpvalue;\n            if (!Number.isFinite(log)) {\n                return 0;\n            }\n            return LocusZoom.TransformationFunctions.get('scinotation')(10 ** -log);\n        },\n        base_phewas_layout() {\n            const layer = LocusZoom.Layouts.get('data_layer', 'phewas_pvalues', {\n                y_axis: { min_extent: [0, 10] },\n            });\n            const panel = LocusZoom.Layouts.get('panel', 'phewas', {\n                height: 300,\n                min_height: 300,\n                data_layers: [layer],\n            });\n\n            return LocusZoom.Layouts.get(\n                'plot', 'standard_phewas',\n                {\n                    panels: [panel],\n                    responsive_resize: true,\n                    state: { variant: this.variant_name, genome_build: this.genome_build },\n                },\n            );\n        },\n        base_phewas_sources() {\n            return [\n                ['phewas', ['PheWASLZ', { url: 'https://portaldev.sph.umich.edu/ukbb/v1/statistic/phewas/' }]],\n            ];\n        },\n        render_trigger() {\n            // HACK: A synthetic property that can be used to drive re-rendering.\n            // Useful in tabbed UIs, as a trigger for when the phewas window receives focus.\n            return this.allow_render ? this.variant_name : this.variant_name;\n        },\n    },\n    watch: {\n        allow_render(value) {\n            const { variant_name: variant } = this;\n            if (value && variant) {\n                // The very first time the user views this component, allow a plot to be created;\n                //   this will trigger something in the template that initiates rendering\n                this.rendered = true;\n            }\n            if (this.has_plot && variant) {\n                // Update an existing PheWAS plot when the user opens this tab\n                this.$refs.phewas_plot.callPlot((plot) => plot.curtain.hide());\n                this.$refs.phewas_plot.callPlot((plot) => plot.applyState({ variant }));\n            }\n        },\n    },\n    beforeCreate() {\n        // LZ plots must be stored as static references, not observables\n        this.has_plot = false;\n    },\n    methods: {\n        callPlot(callback) {\n            // Allow external widgets to manipulate the plot directly\n            if (this.has_plot) {\n                this.$refs.phewas_plot.callPlot(callback);\n            }\n        },\n\n        receivePlot() {\n            this.has_plot = true;\n\n            // Use listeners to warn when no variant data is available\n            this.$refs.phewas_plot.callPlot((plot) => {\n                plot.subscribeToData({ from_layer: 'phewas.phewaspvalues' }, (data, plot) => {\n                    if (!data || !data.length) {\n                        plot.curtain.show('There is no PheWAS data available for the requested variant. Please try another variant.');\n                    }\n                });\n            });\n            // Since the plot already has data, ensure the event fires immediately.\n            this.$refs.phewas_plot.callPlot((plot) => plot.emit('data_rendered'));\n        },\n    },\n};\n</script>\n\n<template>\n  <div>\n    <p v-if=\"!variant_name || !rendered\">\n      Please select a variant in order to generate a PheWAS plot. You can click on any scatter plot\n      point in an association track.\n    </p>\n    <div v-else>\n      <h3>Known PheWAS Results: {{ variant_name }}</h3>\n      <p>\n        In your study <em style=\"word-break: break-word\">{{ your_study }}</em>, this variant has a\n        <span\n          :title=\"`p-value ${display_pvalue}`\"\n          class=\"text-muted definition\">\n          -log<sub>10</sub> p-value of <strong>{{ display_logpvalue }}</strong>\n        </span>. Below are other\n        results for comparison.\n      </p>\n\n      <lz-plot\n        ref=\"phewas_plot\"\n        :base_layout=\"base_phewas_layout\"\n        :base_sources=\"base_phewas_sources\"\n        :show_loading=\"true\"\n        @connected=\"receivePlot\" />\n    </div>\n    <p>\n      PheWAS results are drawn from a large-scale analysis of the UK Biobank dataset, as described in\n      <a href=\"https://doi.org/10.1038/s41588-018-0184-y\">Nature Genetics volume 50, pages 13351341 (2018)</a>.\n    </p>\n\n  </div>\n</template>\n\n\n<style scoped>\n.definition {\n  text-decoration: dotted underline;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/source-map-loader/index.js!./PhewasMaker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/source-map-loader/index.js!./PhewasMaker.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PhewasMaker.vue?vue&type=template&id=0bee02fc&scoped=true&\"\nimport script from \"./PhewasMaker.vue?vue&type=script&lang=js&\"\nexport * from \"./PhewasMaker.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PhewasMaker.vue?vue&type=style&index=0&id=0bee02fc&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0bee02fc\",\n  null\n  \n)\n\nexport default component.exports","<script>\n/**\n * Show a group of interconnected plots and export tables, for the provided data\n */\nimport { BCard, BTab, BTabs } from 'bootstrap-vue/src/';\n\nimport ExportData from './ExportData.vue';\nimport LzPlot from './LzPlot.vue';\nimport PhewasMaker from './PhewasMaker.vue';\n\n// Named constants that map to the order (index) of tabs as declared in the template for this component\nconst TABS = Object.freeze({PLOT: 0, PHEWAS: 1, EXPORT: 2});\n\nexport default {\n    name: 'PlotPanes',\n    components: {\n        ExportData,\n        LzPlot,\n        PhewasMaker,\n        BCard,\n        BTab,\n        BTabs,\n    },\n    props: {\n        base_layout: { type: Object, default: () => ({}) },\n        base_sources: { type: Array, default: () => [] },\n        known_tracks: { type: Array, default: () => [] },\n\n        // Basic plot/ region\n        chr: { type: String, default: null },\n        start: { type: Number, default: null },\n        end: { type: Number, default: null },\n        genome_build: { type: String, default: 'GRCh37' },\n\n        // Control optional features (this could be done more nicely)\n        dynamic_urls: { type: Boolean, default: false }, // Change URL when plot updates\n    },\n    data() {\n        return {\n            selected_tab: 0,\n\n            // For the \"phewas plot\" label:\n            tmp_phewas_study: null,\n            tmp_phewas_variant: null,\n            tmp_phewas_logpvalue: null,\n\n            // Required for export widget\n            tmp_export_callback: null,\n            table_data: [],\n        };\n    },\n    computed: {\n        allow_phewas() {\n            // Our current phewas api only has build 37 datasets; disable option for build 38\n            return this.genome_build === 'GRCh37';\n        },\n        has_studies() {\n            return !!this.known_tracks.length;\n        },\n    },\n    beforeCreate() {\n        this.TABS = TABS;\n        this.has_plot = false;\n    },\n    methods: {\n        receivePlot() {\n            this.has_plot = true;\n            this.$emit('plot-created');\n        },\n        addStudy(panel_configs, source_configs) {\n            // Add a study to the plot\n            this.$refs.assoc_plot.addPanels(panel_configs, source_configs);\n        },\n        onVariantClick(lzEvent) {\n            // Respond to clicking on an association plot datapoint\n            const panel_name = lzEvent.sourceID;\n            if (panel_name.indexOf('association_') === -1) {\n                return;\n            }\n\n            // TODO: Clean this up a bit to better match original display name\n            const variant_data = lzEvent.data;\n            // Internally, LZ broadcasts `plotname.assoc_study`. Convert to `study` for display\n            this.tmp_phewas_study = panel_name.split('.')[1].replace(/^association_/, '');\n            this.tmp_phewas_variant = variant_data['assoc:variant'];\n            this.tmp_phewas_logpvalue = variant_data['assoc:log_pvalue'];\n        },\n\n        subscribeToData(layer_name) {\n            // This method controls one table widget that draws data from one set of plot fields\n            if (this.tmp_export_callback) {\n                this.$refs.assoc_plot.callPlot((plot) => plot.off('data_from_layer', this.tmp_export_callback));\n                this.tmp_export_callback = null;\n            }\n            if (!layer_name || !this.has_plot) {\n                this.table_data = [];\n                return;\n            }\n            this.tmp_export_callback = this.$refs.assoc_plot.callPlot((plot) => {\n                return plot.subscribeToData({ from_layer: layer_name }, (data) => this.table_data = data);\n            });\n            // In this use case, the plot already has data; make sure it feeds data to the table\n            // immediately\n            this.$refs.assoc_plot.callPlot((plot) => plot.applyState());\n        },\n    },\n};\n</script>\n\n<template>\n  <div>\n    <b-card no-body>\n      <b-tabs\n        v-model=\"selected_tab\"\n        pills\n        card\n        vertical\n        style=\"min-height:1000px;\"\n        class=\"flex-nowrap\"\n        content-class=\"scroll-extra\"\n      >\n        <b-tab\n          :active=\"selected_tab === TABS.PLOT\"\n          title=\"GWAS\"\n        >\n          <lz-plot\n            v-if=\"has_studies\"\n            ref=\"assoc_plot\"\n            :show_loading=\"true\"\n            :base_layout=\"base_layout\"\n            :base_sources=\"base_sources\"\n            :chr=\"chr\"\n            :start=\"start\"\n            :end=\"end\"\n            :dynamic_urls=\"dynamic_urls\"\n            @element_clicked=\"onVariantClick\"\n            @connected=\"receivePlot\" />\n          <div\n            v-else\n            class=\"placeholder-plot\"\n            style=\"display:table;\">\n            <span\n              class=\"text-center\"\n              style=\"display: table-cell; vertical-align:middle\">\n              Please add data from a tabix file to continue\n            </span>\n          </div>\n        </b-tab>\n        <b-tab\n          :active=\"selected_tab === TABS.PHEWAS\"\n          :disabled=\"!has_studies || !allow_phewas\"\n        >\n          <template slot=\"title\">\n            <span title=\"Only available for build GRCh37 datasets\">PheWAS</span>\n          </template>\n          <phewas-maker\n            ref=\"phewas\"\n            :variant_name=\"tmp_phewas_variant\"\n            :genome_build=\"genome_build\"\n            :your_study=\"tmp_phewas_study\"\n            :your_logpvalue=\"tmp_phewas_logpvalue\"\n            :allow_render=\"selected_tab === TABS.PHEWAS\"/>\n        </b-tab>\n        <b-tab\n          :active=\"selected_tab === TABS.EXPORT\"\n          :disabled=\"!has_studies\"\n          title=\"Export\">\n          <export-data\n            :known_tracks=\"known_tracks\"\n            :table_data=\"table_data\"\n            @requested-data=\"subscribeToData\"/>\n        </b-tab>\n\n      </b-tabs>\n    </b-card>\n  </div>\n</template>\n\n\n<style>\n  .placeholder-plot {\n    width: 100%;\n    height: 500px;\n    border-style: dotted;\n  }\n  .scroll-extra {\n    overflow-x: scroll;\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/source-map-loader/index.js!./PlotPanes.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/source-map-loader/index.js!./PlotPanes.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PlotPanes.vue?vue&type=template&id=67374886&\"\nimport script from \"./PlotPanes.vue?vue&type=script&lang=js&\"\nexport * from \"./PlotPanes.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PlotPanes.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"row\"},[(!_vm.batch_mode_active)?_c('div',{staticClass:\"col-sm-6\"},[(_vm.study_count < _vm.max_studies)?_c('div',[_c('tabix-adder',{attrs:{\"allow_ld\":_vm.study_count > 0},on:{\"ready\":_vm.receiveTabixReader,\"fail\":_vm.showMessage}})],1):_vm._e()]):_vm._e(),(!_vm.batch_mode_active)?_c('div',{staticClass:\"col-sm-6\"},[(_vm.study_count)?_c('div',{staticClass:\"d-flex justify-content-end\"},[_c('region-picker',{attrs:{\"genome_build\":_vm.genome_build,\"max_range\":_vm.max_region_size,\"search_url\":\"https://portaldev.sph.umich.edu/api/v1/annotation/omnisearch/\"},on:{\"ready\":_vm.selectRange,\"fail\":_vm.showMessage}}),_c('batch-spec',{staticClass:\"ml-1\",attrs:{\"max_range\":_vm.max_region_size},on:{\"ready\":_vm.activateBatchMode},scopedSlots:_vm._u([(_vm.batch_region_getter)?{key:\"preset-button\",fn:function(ref){\nvar updateRegions = ref.updateRegions;\nreturn [_c('button',{staticClass:\"btn btn-warning\",on:{\"click\":function($event){updateRegions(_vm.batch_region_getter())}}},[_vm._v(\"Get top hits\")])]}}:null],null,true)})],1):_c('b-dropdown',{staticClass:\"float-right\",attrs:{\"text\":\"Genome Build\",\"variant\":\"info\"}},[_c('div',{staticClass:\"px-3\"},[_c('div',{staticClass:\"form-check\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.i_genome_build),expression:\"i_genome_build\"}],staticClass:\"form-check-input\",attrs:{\"id\":\"build-37\",\"type\":\"radio\",\"name\":\"genome_build\",\"value\":\"GRCh37\"},domProps:{\"checked\":_vm._q(_vm.i_genome_build,\"GRCh37\")},on:{\"change\":function($event){_vm.i_genome_build=\"GRCh37\"}}}),_c('label',{staticClass:\"form-check-label\",attrs:{\"for\":\"build-37\"}},[_vm._v(\"GRCh37\")])]),_c('div',{staticClass:\"form-check\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.i_genome_build),expression:\"i_genome_build\"}],staticClass:\"form-check-input\",attrs:{\"id\":\"build-38\",\"type\":\"radio\",\"name\":\"genome_build\",\"value\":\"GRCh38\"},domProps:{\"checked\":_vm._q(_vm.i_genome_build,\"GRCh38\")},on:{\"change\":function($event){_vm.i_genome_build=\"GRCh38\"}}}),_c('label',{staticClass:\"form-check-label\",attrs:{\"for\":\"build-38\"}},[_vm._v(\"GRCh38\")])])])])],1):_vm._e(),(_vm.batch_mode_active)?_c('div',{staticClass:\"col-md-12\"},[_c('batch-scroller',{attrs:{\"regions\":_vm.batch_mode_regions},on:{\"navigate\":_vm.selectRange,\"cancel\":function($event){_vm.batch_mode_active = false}}})],1):_vm._e(),(_vm.message)?_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-sm-12\"},[_c('span',{class:[_vm.message_class]},[_vm._v(_vm._s(_vm.message))])])]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-dropdown',{ref:\"dropdown\",attrs:{\"variant\":\"info\",\"right\":\"\",\"text\":\"Batch view\"}},[_c('div',{staticClass:\"px-3\"},[_c('label',{attrs:{\"for\":\"batch-region-list\"}},[_vm._v(\"Specify regions to plot (one per line):\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.region_text),expression:\"region_text\"}],attrs:{\"id\":\"batch-region-list\",\"rows\":\"10\",\"placeholder\":\"chr:start-end or chr:pos\"},domProps:{\"value\":(_vm.region_text)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.region_text=$event.target.value}}}),(_vm.message)?_c('div',{staticClass:\"text-danger\"},[_vm._v(_vm._s(_vm.message))]):_vm._e(),_c('div',{staticClass:\"d-flex justify-content-end align-items-center\"},[(_vm.show_loader)?_c('div',{staticClass:\"d-flex align-items-center spinner-border   text-secondary mr-1\",attrs:{\"role\":\"status\"}},[_c('span',{staticClass:\"sr-only\"},[_vm._v(\"Loading...\")])]):_vm._e(),_vm._t(\"preset-button\",null,{\"updateRegions\":_vm.updateRegions}),_c('button',{staticClass:\"btn btn-success ml-1\",on:{\"click\":_vm.sendRegions}},[_vm._v(\"Go\")])],2)])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * Helper functions for handling various entities, like identifier strings (genes, regions, etc)\n *  that appear in a wide range of genetic datasets\n */\n\nimport { DEFAULT_REGION_SIZE, REGEX_POSITION, REGEX_REGION } from './constants';\n\n/**\n * Parse a single position and return a range, based on the region size\n * @param {Number} position\n * @param {Number} region_size\n * @returns {Number[]} [start, end]\n */\nfunction positionToMidRange(position, { region_size = DEFAULT_REGION_SIZE } = {}) {\n    const bounds = Math.floor(region_size / 2);\n    return [Math.max(position - bounds, 1), position + bounds];\n}\n\n/**\n * Parse a single position and return a range with this position near the start (with some padding)\n * @param position\n * @param DEFAULT_REGION_SIZE\n * @returns {Number[]} [start, end]\n */\nfunction positionToStartRange(position, { region_size = DEFAULT_REGION_SIZE, padding = 0.025 } = {}) {\n    const start = Math.max(1, position - region_size * padding);\n    const end = start + region_size * (1 + padding);\n    return [start, end];\n}\n\n/**\n * Parse a variant/region identifier, in the format chr:start-end or chr:center. Return start\n * and end positions.\n *\n * @param {string} spec\n * @param {number} [region_size=DEFAULT_REGION_SIZE] If specified, enforces a max region size.\n * @returns {[string, number, number]} [chr, start, end]\n */\nfunction parseRegion(spec, { region_size = DEFAULT_REGION_SIZE }) {\n    const range_match = spec.match(REGEX_REGION);\n    const single_match = spec.match(REGEX_POSITION);\n    let chr;\n    let start;\n    let end;\n    if (range_match) {\n        [chr, start, end] = range_match.slice(1);\n        // Ensure that returned values are numeric\n        start = +start;\n        end = +end;\n    } else if (single_match) {\n        let pos;\n        [chr, pos] = single_match.slice(1);\n        pos = +pos;\n        [start, end] = positionToMidRange(pos, { region_size });\n    } else {\n        throw new Error(`Could not parse the specified range: ${spec}`);\n    }\n\n    if (region_size && (end - start) > region_size) {\n        throw new Error(`Maximum allowable range is ${region_size.toLocaleString()} bp`);\n    }\n\n    if (end < start) {\n        throw new Error(`The requested end position ${end.toLocaleString()} is smaller than the requested start position ${start.toLocaleString()}`);\n    }\n    return { chr, start, end };\n}\n\nexport { parseRegion, positionToMidRange, positionToStartRange };\n","<script>\n/**\n * Allows user to designate a list of regions to plot. Handles parsing and selection of regions,\n *  which will then be consumed by another widget that handles cycling between those choices.\n */\n\nimport { BDropdown } from 'bootstrap-vue/src/';\nimport { parseRegion } from '../util/entity-helpers';\n\nexport default {\n    name: 'BatchSpec',\n    components: { BDropdown },\n    props: {\n        max_range: { type: Number, default: null },\n    },\n    data() {\n        return {\n            region_text: '',\n            show_loader: false,\n            message: null, // display validation errors\n        };\n    },\n    methods: {\n        getRegionsFromTextBox() {\n            // Regions are one per line, and eliminate empty lines\n            const text = this.region_text.trim().split(/\\r?\\n/).filter((value) => !!value);\n            return text.map((item) => parseRegion(item, { region_size: this.max_range }));\n        },\n        validateRegions(items) {\n            // There must be at least one region selected. Can add other checks in the future.\n            return !!items.length;\n        },\n        updateRegions(content) { // List of {chr,start, end} entries, one per region\n            // This is used by scoped slots: Receive a list of regions, and populate textarea\n            // Sometimes we may want to handle fetching items from a network request; wrap in a\n            //   promise to be sure this handles async behavior or values, consistently\n            this.show_loader = true;\n            Promise.resolve(content)\n                .then((items) => items.map(({ chr, start, end }) => `${chr}:${start}-${end}`).join('\\n'))\n                .then((result) => {\n                    this.region_text = result;\n                })\n                .catch((e) => {\n                    this.message = 'Unable to retrieve items';\n                })\n                .finally(() => {\n                    this.show_loader = false;\n                });\n        },\n        sendRegions() {\n            // Fetch, parse, and send the list of regions\n            let items;\n            try {\n                items = this.getRegionsFromTextBox();\n            } catch (e) {\n                this.message = e.toString();\n                return;\n            }\n            if (!items.length) {\n                this.message = 'Must specify at least one region';\n                return;\n            }\n            this.message = '';\n            this.$emit('ready', items);\n            this.$refs.dropdown.hide();\n        },\n    },\n};\n</script>\n\n<template>\n  <div>\n    <b-dropdown\n      ref=\"dropdown\"\n      variant=\"info\"\n      right\n      text=\"Batch view\">\n      <div class=\"px-3\">\n        <label for=\"batch-region-list\">Specify regions to plot (one per line):</label>\n        <textarea\n          id=\"batch-region-list\"\n          v-model=\"region_text\"\n          rows=\"10\"\n          placeholder=\"chr:start-end or chr:pos\"/>\n        <div\n          v-if=\"message\"\n          class=\"text-danger\">{{ message }}</div>\n        <div class=\"d-flex justify-content-end align-items-center\">\n          <div\n            v-if=\"show_loader\"\n            class=\"d-flex align-items-center spinner-border   text-secondary mr-1\"\n            role=\"status\">\n            <span class=\"sr-only\">Loading...</span>\n          </div>\n          <!-- Optional spot for a button (like \"fetch presets\") -->\n          <slot\n            :updateRegions=\"updateRegions\"\n            name=\"preset-button\"/>\n          <button\n            class=\"btn btn-success ml-1\"\n            @click=\"sendRegions\">Go</button>\n        </div>\n      </div>\n    </b-dropdown>\n  </div>\n</template>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/source-map-loader/index.js!./BatchSpec.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/source-map-loader/index.js!./BatchSpec.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BatchSpec.vue?vue&type=template&id=001c3278&scoped=true&\"\nimport script from \"./BatchSpec.vue?vue&type=script&lang=js&\"\nexport * from \"./BatchSpec.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"001c3278\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"alert-success d-flex justify-content-between align-items-center\"},[_c('button',{staticClass:\"btn btn-link\",attrs:{\"disabled\":_vm.current_index <= 0},on:{\"click\":function($event){return _vm.goToItem(-1)}}},[_vm._v(\"< Prev\")]),_c('span',[_vm._v(\"\\n    Current Locus: \"+_vm._s(_vm.current_region_display)+\" -\\n    \"),(_vm.current_index !==null)?_c('span',[_vm._v(\"\\n      (\"+_vm._s(_vm.current_index + 1)+\" of \"+_vm._s(_vm.regions.length)+\") -\\n    \")]):_vm._e(),_c('button',{staticClass:\"btn btn-link p-0 border-0 align-bottom\",attrs:{\"title\":\"Cancel navigation\"},on:{\"click\":_vm.cancelNavigation}},[_vm._v(\"cancel batch mode\")])]),_c('button',{staticClass:\"btn btn-link\",attrs:{\"disabled\":_vm.current_index !== null && _vm.current_index >= _vm.regions.length - 1},on:{\"click\":function($event){return _vm.goToItem(+1)}}},[_vm._v(\"Next >\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\n/**\n * Show a \"scroll through a list of regions\" toolbar\n */\nexport default {\n    name: 'BatchScroller',\n    props: {\n        regions: { type: Array, default: () => [] },\n    },\n    data() {\n        return { current_index: null };\n    },\n    computed: {\n        current_region() {\n            return this.current_index === null ? null : this.regions[this.current_index];\n        },\n        current_region_display() {\n            const region = this.current_region;\n            if (!region) {\n                return '(none)';\n            }\n            const { chr, start, end } = region;\n            return `${chr}: ${start.toLocaleString()}-${end.toLocaleString()}`;\n        },\n    },\n    methods: {\n        cancelNavigation() {\n            this.$emit('cancel');\n        },\n        goToItem(increment) {\n            if (this.current_index === null) {\n                this.current_index = 0;\n            } else {\n                this.current_index += increment;\n            }\n            this.$emit('navigate', this.current_region);\n        },\n    },\n};\n</script>\n\n\n<template>\n  <div class=\"alert-success d-flex justify-content-between align-items-center\">\n    <button\n      :disabled=\"current_index <= 0\"\n      class=\"btn btn-link\"\n      @click=\"goToItem(-1)\"\n    >&lt; Prev</button>\n    <span>\n      Current Locus: {{ current_region_display }} -\n      <span v-if=\"current_index !==null\">\n        ({{ current_index + 1 }} of {{ regions.length }}) -\n      </span>\n      <button\n        class=\"btn btn-link p-0 border-0 align-bottom\"\n        title=\"Cancel navigation\"\n        @click=\"cancelNavigation\"\n      >cancel batch mode</button>\n    </span>\n    <button\n      :disabled=\"current_index !== null && current_index >= regions.length - 1\"\n      class=\"btn btn-link\"\n      @click=\"goToItem(+1)\"\n    >Next &gt;</button>\n  </div>\n</template>\n\n<style scoped></style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/source-map-loader/index.js!./BatchScroller.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/source-map-loader/index.js!./BatchScroller.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BatchScroller.vue?vue&type=template&id=bc1573d0&scoped=true&\"\nimport script from \"./BatchScroller.vue?vue&type=script&lang=js&\"\nexport * from \"./BatchScroller.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bc1573d0\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"modal\"}},[_c('div',{staticClass:\"modal-mask\"},[_c('div',{staticClass:\"modal-wrapper\"},[_c('div',{staticClass:\"modal-container\"},[_c('div',{staticClass:\"modal-header\"},[_c('h3',[_vm._v(\"Select file options...\")]),_c('button',{staticClass:\"pull-right\",attrs:{\"aria-label\":\"close\"},on:{\"click\":function($event){return _vm.$emit('close')}}},[_vm._v(\"X\\n          \")])]),_c('div',{staticClass:\"modal-body\"},[_c('div',[(_vm.current_page === _vm.PAGES.variant)?_c('div',[_c('b-tabs',{model:{value:(_vm.variant_spec_tab),callback:function ($$v) {_vm.variant_spec_tab=$$v},expression:\"variant_spec_tab\"}},[_c('b-tab',{staticClass:\"pt-3\",attrs:{\"title\":\"Variant from columns\"}},[_c('div',{staticClass:\"form-group row\"},[_c('label',{staticClass:\"col-sm-2\",attrs:{\"for\":(\"vs-chr-\" + _vm._uid)}},[_vm._v(\"Chromosome\")]),_c('div',{staticClass:\"col-sm-4\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.chrom_col),expression:\"chrom_col\"}],staticClass:\"form-control\",attrs:{\"id\":(\"vs-chr-\" + _vm._uid)},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.chrom_col=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.column_titles),function(item,index){return _c('option',{key:index,domProps:{\"value\":index + 1}},[_vm._v(\"\\n                          \"+_vm._s(item)+\"\\n                        \")])}),0)]),_c('label',{staticClass:\"col-sm-2\",attrs:{\"for\":(\"vs-pos-\" + _vm._uid)}},[_vm._v(\"Position\")]),_c('div',{staticClass:\"col-sm-4\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.pos_col),expression:\"pos_col\"}],staticClass:\"form-control\",attrs:{\"id\":(\"vs-pos-\" + _vm._uid)},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.pos_col=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.column_titles),function(item,index){return _c('option',{key:index,domProps:{\"value\":index + 1}},[_vm._v(\"\\n                          \"+_vm._s(item)+\"\\n                        \")])}),0)])]),_c('div',{staticClass:\"form-group row\"},[_c('label',{staticClass:\"col-sm-2\",attrs:{\"for\":(\"vs-ref-\" + _vm._uid)}},[_vm._v(\"Ref allele\")]),_c('div',{staticClass:\"col-sm-4\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.ref_col),expression:\"ref_col\"}],staticClass:\"form-control\",attrs:{\"id\":(\"vs-ref-\" + _vm._uid)},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.ref_col=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.column_titles),function(item,index){return _c('option',{key:index,domProps:{\"value\":index + 1}},[_vm._v(\"\\n                          \"+_vm._s(item)+\"\\n                        \")])}),0)]),_c('label',{staticClass:\"col-sm-2\",attrs:{\"for\":(\"vs-alt-\" + _vm._uid)}},[_vm._v(\"Alt allele\")]),_c('div',{staticClass:\"col-sm-4\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.alt_col),expression:\"alt_col\"}],staticClass:\"form-control\",attrs:{\"id\":(\"vs-alt-\" + _vm._uid)},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.alt_col=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.column_titles),function(item,index){return _c('option',{key:index,domProps:{\"value\":index + 1}},[_vm._v(\"\\n                          \"+_vm._s(item)+\"\\n                        \")])}),0)])])]),_c('b-tab',{staticClass:\"pt-3\",attrs:{\"title\":\"Variant from marker\"}},[_c('div',{staticClass:\"form-group row\"},[_c('label',{staticClass:\"col-sm-2\",attrs:{\"for\":(\"vs-marker-\" + _vm._uid)}},[_vm._v(\"Marker\")]),_c('div',{staticClass:\"col-sm-4\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.marker_col),expression:\"marker_col\"}],staticClass:\"form-control\",attrs:{\"id\":(\"vs-marker-\" + _vm._uid)},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.marker_col=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.column_titles),function(item,index){return _c('option',{key:index,domProps:{\"value\":index + 1}},[_vm._v(\"\\n                          \"+_vm._s(item)+\"\\n                        \")])}),0)])])])],1),_c('div',{staticClass:\"form-group row\"},[_c('label',{staticClass:\"col-sm-2\",attrs:{\"for\":(\"vs-pval-\" + _vm._uid)}},[_vm._v(\"P-value column\")]),_c('div',{staticClass:\"col-sm-4\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.pvalue_col),expression:\"pvalue_col\"}],staticClass:\"form-control\",attrs:{\"id\":(\"vs-pval-\" + _vm._uid)},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.pvalue_col=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.column_titles),function(item,index){return _c('option',{key:index,domProps:{\"value\":index + 1}},[_vm._v(\"\\n                      \"+_vm._s(item)+\"\\n                    \")])}),0)]),_c('div',{staticClass:\"col-sm-2\"},[_c('label',{staticClass:\"form-check-label\",staticStyle:{\"white-space\":\"nowrap\"},attrs:{\"for\":\"is_neg_log_pvalue\"}},[_vm._v(\"\\n                    is \"),_c('em',[_vm._v(\"-log\"),_c('sub',[_vm._v(\"10\")]),_vm._v(\"(p)\")])])]),_c('div',{staticClass:\"col-sm-4\"},[_c('div',{staticClass:\"form-check float-left\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.is_neg_log_pvalue),expression:\"is_neg_log_pvalue\"}],staticClass:\"form-check-input\",attrs:{\"id\":\"is_neg_log_pvalue\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.is_neg_log_pvalue)?_vm._i(_vm.is_neg_log_pvalue,null)>-1:(_vm.is_neg_log_pvalue)},on:{\"change\":function($event){var $$a=_vm.is_neg_log_pvalue,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.is_neg_log_pvalue=$$a.concat([$$v]))}else{$$i>-1&&(_vm.is_neg_log_pvalue=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.is_neg_log_pvalue=$$c}}}})])])])],1):(_vm.current_page === _vm.PAGES.optional)?_c('div',[_c('h3',[_vm._v(\"Optional fields\")]),_c('div',{staticClass:\"form-group row\"},[_c('label',{staticClass:\"col-sm-2\",attrs:{\"for\":(\"vs-beta-\" + _vm._uid)}},[_vm._v(\"Effect size\")]),_c('div',{staticClass:\"col-sm-4\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.beta_col),expression:\"beta_col\"}],staticClass:\"form-control\",attrs:{\"id\":(\"vs-beta-\" + _vm._uid)},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.beta_col=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.column_titles),function(item,index){return _c('option',{key:index,domProps:{\"value\":index + 1}},[_vm._v(\"\\n                      \"+_vm._s(item)+\"\\n                    \")])}),0)]),_c('div',{staticClass:\"col-sm-6\"})]),_c('div',{staticClass:\"form-group row\"},[_c('label',{staticClass:\"col-sm-2\",attrs:{\"for\":(\"vs-stderr-\" + _vm._uid)}},[_vm._v(\"Std. Err.\")]),_c('div',{staticClass:\"col-sm-4\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.stderr_beta_col),expression:\"stderr_beta_col\"}],staticClass:\"form-control\",attrs:{\"id\":(\"vs-stderr-\" + _vm._uid)},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.stderr_beta_col=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.column_titles),function(item,index){return _c('option',{key:index,domProps:{\"value\":index + 1}},[_vm._v(\"\\n                      \"+_vm._s(item)+\"\\n                    \")])}),0)])]),_c('h4',[_vm._v(\"Allele Frequency\")]),_c('div',{staticClass:\"form-group row\"},[_c('label',{staticClass:\"col-sm-2\"},[_vm._v(\"Effect allele\")]),_c('div',{staticClass:\"col-sm-10\"},[_c('b-form-radio',{attrs:{\"value\":false,\"inline\":\"\"},model:{value:(_vm.is_alt_effect),callback:function ($$v) {_vm.is_alt_effect=$$v},expression:\"is_alt_effect\"}},[_vm._v(\"Ref\")]),_c('b-form-radio',{attrs:{\"value\":true,\"inline\":\"\"},model:{value:(_vm.is_alt_effect),callback:function ($$v) {_vm.is_alt_effect=$$v},expression:\"is_alt_effect\"}},[_vm._v(\"Alt\")])],1)]),_c('div',{staticClass:\"form-group row\"},[_c('label',{staticClass:\"col-sm-2\"},[_vm._v(\"Specify from\")]),_c('div',{staticClass:\"col-sm-10\"},[_c('b-form-radio',{attrs:{\"value\":_vm.AF_SPEC.freq,\"inline\":\"\"},model:{value:(_vm.freq_spec_option),callback:function ($$v) {_vm.freq_spec_option=$$v},expression:\"freq_spec_option\"}},[_vm._v(\"Frequency\")]),_c('b-form-radio',{attrs:{\"value\":_vm.AF_SPEC.count,\"inline\":\"\"},model:{value:(_vm.freq_spec_option),callback:function ($$v) {_vm.freq_spec_option=$$v},expression:\"freq_spec_option\"}},[_vm._v(\"Counts\")])],1)]),(_vm.freq_spec_option === _vm.AF_SPEC.freq)?_c('div',[_c('div',{staticClass:\"form-group row\"},[_c('label',{staticClass:\"col-sm-2\",attrs:{\"for\":(\"vs-af-freq-\" + _vm._uid)}},[_vm._v(\"Frequency\")]),_c('div',{staticClass:\"col-sm-4\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.allele_freq_col),expression:\"allele_freq_col\"}],staticClass:\"form-control\",attrs:{\"id\":(\"vs-af-freq-\" + _vm._uid)},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.allele_freq_col=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.column_titles),function(item,index){return _c('option',{key:index,domProps:{\"value\":index + 1}},[_vm._v(\"\\n                        \"+_vm._s(item)+\"\\n                      \")])}),0)]),_c('div',{staticClass:\"col-sm-6\"})])]):(_vm.freq_spec_option === _vm.AF_SPEC.count)?_c('div',[_c('div',{staticClass:\"form-group row\"},[_c('label',{staticClass:\"col-sm-2\",attrs:{\"for\":(\"vs-af-count-\" + _vm._uid)}},[_vm._v(\"Count\")]),_c('div',{staticClass:\"col-sm-4\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.allele_count_col),expression:\"allele_count_col\"}],staticClass:\"form-control\",attrs:{\"id\":(\"vs-af-count-\" + _vm._uid)},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.allele_count_col=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.column_titles),function(item,index){return _c('option',{key:index,domProps:{\"value\":index + 1}},[_vm._v(\"\\n                        \"+_vm._s(item)+\"\\n                      \")])}),0)]),_c('label',{staticClass:\"col-sm-2\",attrs:{\"for\":(\"vs-af-ns-\" + _vm._uid)}},[_vm._v(\"# Samples\")]),_c('div',{staticClass:\"col-sm-4\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.n_samples_col),expression:\"n_samples_col\"}],staticClass:\"form-control\",attrs:{\"id\":(\"vs-af-ns-\" + _vm._uid)},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.n_samples_col=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.column_titles),function(item,index){return _c('option',{key:index,domProps:{\"value\":index + 1}},[_vm._v(\"\\n                        \"+_vm._s(item)+\"\\n                      \")])}),0)])])]):_c('div',[_c('span',{staticClass:\"text-muted\"},[_vm._v(\"\\n                  Please select a frequency option in order to use this feature\\n                \")])])]):_vm._e(),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"card card-body bg-light\"},[(_vm.isValid && _vm.preview.error)?_c('div',[_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(_vm.preview.error))])]):(_vm.isValid)?_c('div',[_c('table',{staticClass:\"preview-table\"},[_c('tr',[_c('td',[_vm._v(\"Variant\")]),_c('td',[_vm._v(_vm._s(_vm.preview.variant))])]),_c('tr',[_c('td',[_vm._v(\"-log\"),_c('sub',[_vm._v(\"10\")]),_vm._v(\"(p)\")]),_c('td',[_vm._v(_vm._s(_vm.preview.log_pvalue.toFixed(3)))])]),_c('tr',[_c('td',[_vm._v(\"\")]),_c('td',[_vm._v(_vm._s(_vm.preview.beta ? _vm.preview.beta.toFixed(3) : ''))])]),_c('tr',[_c('td',[_vm._v(\"SE()\")]),_c('td',[_vm._v(_vm._s(_vm.preview.stderr_beta ? _vm.preview.stderr_beta.toFixed(3): ''))])]),_c('tr',[_c('td',[_vm._v(\"Allele freq\")]),_c('td',[_vm._v(\"\\n                        \"+_vm._s(_vm.preview.alt_allele_freq ? _vm.preview.alt_allele_freq.toFixed(3) : '')+\"\\n                      \")])])])]):_c('div',[_vm._v(\"\\n                  Please select options to preview parsed data.\\n                \")])])]),_c('div',{staticClass:\"row mt-3\"},[(_vm.current_page === _vm.PAGES.optional)?_c('button',{staticClass:\"btn btn-success ml-auto\",attrs:{\"disabled\":!_vm.isValid},on:{\"click\":_vm.sendOptions}},[_vm._v(\"\\n                Accept options\\n              \")]):_c('button',{staticClass:\"btn btn-success ml-auto\",attrs:{\"disabled\":!_vm.isValid},on:{\"click\":function($event){_vm.current_page += 1}}},[_vm._v(\"Next\\n              \")])])])])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\n/**\n * A modal dialog window used to specify file parsing configuration options\n * See: https://vuejs.org/v2/examples/modal.html -->\n */\nimport { BFormGroup, BFormRadio, BTabs, BTab } from 'bootstrap-vue/src/';\n\nimport { _isHeader, guessGWAS } from 'locuszoom/esm/ext/lz-parsers/gwas/sniffers';\nimport { makeGWASParser } from 'locuszoom/esm/ext/lz-parsers/gwas/parsers';\nimport { has } from 'locuszoom/esm/ext/lz-parsers/utils';\nimport { positionToStartRange } from '../util/entity-helpers';\n\nconst TAB_FROM_SEPARATE_COLUMNS = 0;\nconst TAB_FROM_MARKER = 1;\n\nconst AF_SPEC = { freq: 1, count: 2 };\n\nconst PAGES = {\n    variant: 1,\n    optional: 2,\n};\n\nlet uid = 0;\n\nexport default {\n    name: 'GwasParserOptions',\n    components: {\n        BFormGroup,\n        BFormRadio,\n        BTab,\n        BTabs,\n    },\n    props: {\n        file_reader: { type: Object, default: null },\n    },\n    data() {\n        return {\n            column_titles: [],\n            sample_data: [],\n\n            // Which part of the UI should we show?\n            current_page: PAGES.variant,\n            variant_spec_tab: TAB_FROM_SEPARATE_COLUMNS,\n            freq_spec_option: null,\n\n            // Configuration options for variant data\n            marker_col: null,\n\n            // These are set by tabix but can be overridden\n            chrom_col: this.file_reader.colSeq || null,\n            pos_col: this.file_reader.colStart || null,\n\n            // User must define these\n            ref_col: null,\n            alt_col: null,\n            pvalue_col: null,\n            is_neg_log_pvalue: false,\n\n            // These fields are each optional and standalone.\n            beta_col: null,\n            stderr_beta_col: null,\n\n            // Optional AF info is provided by 2-3 fields: `is_alt_effect` + (freq OR 2 counts)\n            allele_freq_col: null,\n            allele_count_col: null,\n            n_samples_col: null,\n            is_alt_effect: null,\n        };\n    },\n    computed: {\n        freqSpec() {\n            const {\n                freq_spec_option,\n                allele_freq_col,\n                allele_count_col,\n                n_samples_col,\n                is_alt_effect,\n            } = this;\n            const res = { is_alt_effect };\n            let is_valid = (is_alt_effect !== null);\n\n            if (freq_spec_option === AF_SPEC.freq) {\n                is_valid = is_valid && has(allele_freq_col);\n                res.allele_freq_col = allele_freq_col;\n            } else if (freq_spec_option === AF_SPEC.count) {\n                is_valid = is_valid && (has(allele_count_col) && has(n_samples_col));\n                res.allele_count_col = allele_count_col;\n                res.n_samples_col = n_samples_col;\n            }\n            return is_valid ? res : {};\n        },\n\n        variantSpec() {\n            // Only provide a value if the variant description is minimally complete\n            const { marker_col, chrom_col, pos_col, ref_col, alt_col } = this;\n            if (this.variant_spec_tab === TAB_FROM_MARKER && has(marker_col)) {\n                return { marker_col };\n            }\n            if (this.variant_spec_tab === TAB_FROM_SEPARATE_COLUMNS\n                && has(pos_col) && has(chrom_col)) {\n                const ret = { chrom_col, pos_col };\n                if (has(ref_col) && has(alt_col)) { // Must specify both, or neither.\n                    Object.assign(ret, { ref_col, alt_col });\n                }\n                return ret;\n            }\n            return {};\n        },\n        parserOptions() {\n            const { pvalue_col, is_neg_log_pvalue, beta_col, stderr_beta_col } = this;\n            return Object.assign(\n                {},\n                {\n                    pvalue_col,\n                    is_neg_log_pvalue,\n                    beta_col,\n                    stderr_beta_col,\n                },\n                this.variantSpec,\n                this.freqSpec\n            );\n        },\n        isValid() {\n            const hasVariant = Object.keys(this.variantSpec).length !== 0;\n            const hasP = has(this.parserOptions.pvalue_col);\n            return hasVariant && hasP;\n        },\n        parser() {\n            if (this.isValid) {\n                try {\n                    return makeGWASParser(this.parserOptions);\n                } catch (e) {\n                    return () => {\n                        throw new Error('Invalid parser configuration');\n                    };\n                }\n            }\n            return () => {};\n        },\n        preview() {\n            try {\n                return this.parser(this.sample_data[0]);\n            } catch (e) {\n                // eslint-disable-next-line no-console\n                console.error(e);\n                return { error: e.toString() || 'Could not parse column contents' };\n            }\n        },\n    },\n    watch: {\n        file_reader: {\n            immediate: true,\n            handler() {\n                // Uses a watcher to resolve async value fetch.\n                // Not every tabix file represents column header data in the same way: in some, it's\n                //  the last line with a comment (meta) character. In others, there is no meta\n                //   char, so we use the last line that was skipped\n                // Fetch 25 rows of data. The last skipped line is assumed to be column headers;\n                //  the last total line is assumed to be data.\n                // This wizard assumes all files are tabix (tab delimited)\n\n                // Find headers by fetching a large block of lines, and picking the best ones\n                const callback = (rows, err) => {\n                    // Read data (and last-ditch attempt to find headers, if necessary)\n                    let first_data_index;\n                    if (this.file_reader.skip) {\n                        // A tabix reader defines headers as \"comment lines and/or lines you skip\"\n                        first_data_index = this.file_reader.skip;\n                    } else {\n                        // Some files use headers that are not comment lines.\n                        first_data_index = rows.findIndex((text) => !_isHeader(text));\n                    }\n                    this.sample_data = rows.slice(first_data_index);\n                    const data_rows = this.sample_data.map((line) => line.split('\\t'));\n                    // Get column titles (if present)\n                    if (first_data_index > 0) { // 0 = no headers; -1 = no rows or no data found\n                        // When data is first loaded, generate a suggested auto-config\n                        this.column_titles = rows[first_data_index - 1]\n                            .replace(/^#+/g, '')\n                            .split('\\t');\n\n                        // When data is first loaded, generate a suggested auto-config\n                        const guess = guessGWAS(this.column_titles, data_rows);\n                        if (guess) {\n                            Object.assign(this, guess);\n                            // If config is detected, set the UI to show best options\n                            this.variant_spec_tab = has(guess.marker_col)\n                                ? TAB_FROM_MARKER : TAB_FROM_SEPARATE_COLUMNS;\n                        }\n                    } else {\n                        // If column headers could not be found, then we can't guess config.\n                        // Provide a set of UI-only labels so that dropdowns are not empty\n                        // TODO: We may be seeing files with no data (esp in non-tabix mode).\n                        //    Improve handling of such edge cases.\n                        const num_cols = rows.length ? rows[0].split('\\t').length : 0;\n                        this.column_titles = [...new Array(num_cols)]\n                            .map((item, index) => `Column ${index + 1}`);\n                    }\n                };\n                this.file_reader.fetchHeader(callback, {\n                    nLines: 30,\n                    metaOnly: false,\n                });\n            },\n        },\n    },\n    beforeCreate() {\n        uid += 1;\n        this._uid = uid;\n        // Makes enums available within vue template\n        this.PAGES = PAGES;\n        this.AF_SPEC = AF_SPEC;\n    },\n    mounted() {\n        document.body.addEventListener('keyup', (e) => {\n            if (e.key === 'Escape') {\n                this.$emit('close');\n            }\n        });\n    },\n    methods: {\n        sendOptions() {\n            // The preview (first line of file) will set the default locus (view) for this data\n            const init_position = this.preview.position;\n            const [start, end] = positionToStartRange(init_position);\n            const init_state = {\n                chr: this.preview.chromosome,\n                start,\n                end,\n            };\n            this.$emit('ready', Object.assign({}, this.parserOptions), init_state);\n            this.$emit('close');\n        },\n    },\n};\n</script>\n\n<template>\n  <transition name=\"modal\">\n    <div class=\"modal-mask\">\n      <div class=\"modal-wrapper\">\n        <div class=\"modal-container\">\n          <div class=\"modal-header\">\n            <h3>Select file options...</h3>\n            <button\n              class=\"pull-right\"\n              aria-label=\"close\"\n              @click=\"$emit('close')\">X\n            </button>\n          </div>\n          <div class=\"modal-body\">\n            <div>\n              <div v-if=\"current_page === PAGES.variant\">\n                <b-tabs v-model=\"variant_spec_tab\">\n                  <b-tab\n                    title=\"Variant from columns\"\n                    class=\"pt-3\">\n                    <div class=\"form-group row\">\n                      <label\n                        :for=\"`vs-chr-${_uid}`\"\n                        class=\"col-sm-2\">Chromosome</label>\n                      <div class=\"col-sm-4\">\n                        <select\n                          :id=\"`vs-chr-${_uid}`\"\n                          v-model=\"chrom_col\"\n                          class=\"form-control\">\n                          <option\n                            v-for=\"(item, index) in column_titles\"\n                            :value=\"index + 1\"\n                            :key=\"index\">\n                            {{ item }}\n                          </option>\n                        </select>\n                      </div>\n                      <label\n                        :for=\"`vs-pos-${_uid}`\"\n                        class=\"col-sm-2\">Position</label>\n                      <div class=\"col-sm-4\">\n                        <select\n                          :id=\"`vs-pos-${_uid}`\"\n                          v-model=\"pos_col\"\n                          class=\"form-control\">\n                          <option\n                            v-for=\"(item, index) in column_titles\"\n                            :value=\"index + 1\"\n                            :key=\"index\">\n                            {{ item }}\n                          </option>\n                        </select>\n                      </div>\n                    </div>\n                    <div class=\"form-group row\">\n                      <label\n                        :for=\"`vs-ref-${_uid}`\"\n                        class=\"col-sm-2\">Ref allele</label>\n                      <div class=\"col-sm-4\">\n                        <select\n                          :id=\"`vs-ref-${_uid}`\"\n                          v-model=\"ref_col\"\n                          class=\"form-control\">\n                          <option\n                            v-for=\"(item, index) in column_titles\"\n                            :value=\"index + 1\"\n                            :key=\"index\">\n                            {{ item }}\n                          </option>\n                        </select>\n                      </div>\n                      <label\n                        :for=\"`vs-alt-${_uid}`\"\n                        class=\"col-sm-2\">Alt allele</label>\n                      <div class=\"col-sm-4\">\n                        <select\n                          :id=\"`vs-alt-${_uid}`\"\n                          v-model=\"alt_col\"\n                          class=\"form-control\">\n                          <option\n                            v-for=\"(item, index) in column_titles\"\n                            :value=\"index + 1\"\n                            :key=\"index\">\n                            {{ item }}\n                          </option>\n                        </select>\n                      </div>\n                    </div>\n                  </b-tab>\n                  <b-tab\n                    title=\"Variant from marker\"\n                    class=\"pt-3\">\n                    <div class=\"form-group row\">\n                      <label\n                        :for=\"`vs-marker-${_uid}`\"\n                        class=\"col-sm-2\">Marker</label>\n                      <div class=\"col-sm-4\">\n                        <select\n                          :id=\"`vs-marker-${_uid}`\"\n                          v-model=\"marker_col\"\n                          class=\"form-control\">\n                          <option\n                            v-for=\"(item, index) in column_titles\"\n                            :value=\"index + 1\"\n                            :key=\"index\">\n                            {{ item }}\n                          </option>\n                        </select>\n                      </div>\n                    </div>\n                  </b-tab>\n                </b-tabs>\n                <div class=\"form-group row\">\n                  <label\n                    :for=\"`vs-pval-${_uid}`\"\n                    class=\"col-sm-2\">P-value column</label>\n                  <div class=\"col-sm-4\">\n                    <select\n                      :id=\"`vs-pval-${_uid}`\"\n                      v-model=\"pvalue_col\"\n                      class=\"form-control\">\n                      <option\n                        v-for=\"(item, index) in column_titles\"\n                        :value=\"index + 1\"\n                        :key=\"index\">\n                        {{ item }}\n                      </option>\n                    </select>\n                  </div>\n                  <div class=\"col-sm-2\">\n                    <label\n                      for=\"is_neg_log_pvalue\"\n                      class=\"form-check-label\"\n                      style=\"white-space: nowrap\">\n                      is <em>-log<sub>10</sub>(p)</em>\n                    </label>\n                  </div>\n                  <div class=\"col-sm-4\">\n                    <div class=\"form-check float-left\">\n                      <input\n                        id=\"is_neg_log_pvalue\"\n                        v-model=\"is_neg_log_pvalue\"\n                        type=\"checkbox\"\n                        class=\"form-check-input\">\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div v-else-if=\"current_page === PAGES.optional\">\n                <h3>Optional fields</h3>\n                <div class=\"form-group row\">\n                  <label\n                    :for=\"`vs-beta-${_uid}`\"\n                    class=\"col-sm-2\">Effect size</label>\n                  <div class=\"col-sm-4\">\n                    <select\n                      :id=\"`vs-beta-${_uid}`\"\n                      v-model=\"beta_col\"\n                      class=\"form-control\">\n                      <option\n                        v-for=\"(item, index) in column_titles\"\n                        :value=\"index + 1\"\n                        :key=\"index\">\n                        {{ item }}\n                      </option>\n                    </select>\n                  </div>\n                  <div class=\"col-sm-6\"/>\n                </div>\n                <div class=\"form-group row\">\n                  <label\n                    :for=\"`vs-stderr-${_uid}`\"\n                    class=\"col-sm-2\">Std. Err.</label>\n                  <div class=\"col-sm-4\">\n                    <select\n                      :id=\"`vs-stderr-${_uid}`\"\n                      v-model=\"stderr_beta_col\"\n                      class=\"form-control\">\n                      <option\n                        v-for=\"(item, index) in column_titles\"\n                        :value=\"index + 1\"\n                        :key=\"index\">\n                        {{ item }}\n                      </option>\n                    </select>\n                  </div>\n                </div>\n                <h4>Allele Frequency</h4>\n                <div class=\"form-group row\">\n                  <label class=\"col-sm-2\">Effect allele</label>\n                  <div class=\"col-sm-10\">\n                    <b-form-radio\n                      :value=\"false\"\n                      v-model=\"is_alt_effect\"\n                      inline>Ref</b-form-radio>\n                    <b-form-radio\n                      :value=\"true\"\n                      v-model=\"is_alt_effect\"\n                      inline>Alt</b-form-radio>\n                  </div>\n                </div>\n\n                <div class=\"form-group row\">\n                  <label class=\"col-sm-2\">Specify from</label>\n                  <div class=\"col-sm-10\">\n                    <b-form-radio\n                      :value=\"AF_SPEC.freq\"\n                      v-model=\"freq_spec_option\"\n                      inline>Frequency</b-form-radio>\n                    <b-form-radio\n                      :value=\"AF_SPEC.count\"\n                      v-model=\"freq_spec_option\"\n                      inline>Counts</b-form-radio>\n                  </div>\n                </div>\n\n                <div v-if=\"freq_spec_option === AF_SPEC.freq\">\n                  <div class=\"form-group row\">\n                    <label\n                      :for=\"`vs-af-freq-${_uid}`\"\n                      class=\"col-sm-2\">Frequency</label>\n                    <div class=\"col-sm-4\">\n                      <select\n                        :id=\"`vs-af-freq-${_uid}`\"\n                        v-model=\"allele_freq_col\"\n                        class=\"form-control\">\n                        <option\n                          v-for=\"(item, index) in column_titles\"\n                          :value=\"index + 1\"\n                          :key=\"index\">\n                          {{ item }}\n                        </option>\n                      </select>\n                    </div>\n                    <div class=\"col-sm-6\"/>\n                  </div>\n                </div>\n                <div v-else-if=\"freq_spec_option === AF_SPEC.count\">\n                  <div class=\"form-group row\">\n                    <label\n                      :for=\"`vs-af-count-${_uid}`\"\n                      class=\"col-sm-2\">Count</label>\n                    <div class=\"col-sm-4\">\n                      <select\n                        :id=\"`vs-af-count-${_uid}`\"\n                        v-model=\"allele_count_col\"\n                        class=\"form-control\">\n                        <option\n                          v-for=\"(item, index) in column_titles\"\n                          :value=\"index + 1\"\n                          :key=\"index\">\n                          {{ item }}\n                        </option>\n                      </select>\n                    </div>\n                    <label\n                      :for=\"`vs-af-ns-${_uid}`\"\n                      class=\"col-sm-2\"># Samples</label>\n                    <div class=\"col-sm-4\">\n                      <select\n                        :id=\"`vs-af-ns-${_uid}`\"\n                        v-model=\"n_samples_col\"\n                        class=\"form-control\">\n                        <option\n                          v-for=\"(item, index) in column_titles\"\n                          :value=\"index + 1\"\n                          :key=\"index\">\n                          {{ item }}\n                        </option>\n                      </select>\n                    </div>\n                  </div>\n                </div>\n                <div v-else>\n                  <span class=\"text-muted\">\n                    Please select a frequency option in order to use this feature\n                  </span>\n                </div>\n\n              </div>\n\n              <div class=\"row\">\n                <div class=\"card card-body bg-light\">\n                  <div v-if=\"isValid && preview.error\">\n                    <span class=\"text-danger\">{{ preview.error }}</span>\n                  </div>\n                  <div v-else-if=\"isValid\">\n                    <table class=\"preview-table\">\n                      <tr>\n                        <td>Variant</td>\n                        <td>{{ preview.variant }}</td>\n                      </tr>\n                      <tr>\n                        <td>-log<sub>10</sub>(p)</td>\n                        <td>{{ preview.log_pvalue.toFixed(3) }}</td>\n                      </tr>\n                      <tr>\n                        <td>&beta;</td>\n                        <td>{{ preview.beta ? preview.beta.toFixed(3) : '' }}</td>\n                      </tr>\n                      <tr>\n                        <td>SE(&beta;)</td>\n                        <td>{{ preview.stderr_beta ? preview.stderr_beta.toFixed(3): '' }}</td>\n                      </tr>\n                      <tr>\n                        <td>Allele freq</td>\n                        <td>\n                          {{ preview.alt_allele_freq ? preview.alt_allele_freq.toFixed(3) : '' }}\n                        </td>\n                      </tr>\n                    </table>\n                  </div>\n                  <div v-else>\n                    Please select options to preview parsed data.\n                  </div>\n                </div>\n              </div>\n\n              <div class=\"row mt-3\">\n                <button\n                  v-if=\"current_page === PAGES.optional\"\n                  :disabled=\"!isValid\"\n                  class=\"btn btn-success ml-auto\"\n                  @click=\"sendOptions\">\n                  Accept options\n                </button>\n                <button\n                  v-else\n                  :disabled=\"!isValid\"\n                  class=\"btn btn-success ml-auto\"\n                  @click=\"current_page += 1\">Next\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </transition>\n</template>\n\n<style scoped>\n  .modal-mask {\n    position: fixed;\n    z-index: 9998;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, .5);\n    overflow-y: scroll;\n    transition: opacity .3s ease;\n  }\n\n  .modal-wrapper {\n    vertical-align: middle;\n  }\n\n  .modal-container {\n    width: 800px;\n    height: 85%;\n    overflow-y: auto;\n    margin: 0 auto;\n    padding: 20px 30px;\n    background-color: #fff;\n    border-radius: 2px;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, .33);\n    transition: all .3s ease;\n    font-family: Helvetica, Arial, sans-serif;\n  }\n\n  .modal-header h3 {\n    margin-top: 0;\n    color: #42b983;\n  }\n\n  .modal-body {\n    margin: 20px 0;\n    overflow-y: scroll;\n  }\n\n  /*\n   * The following styles are auto-applied to elements with\n   * transition=\"modal\" when their visibility is toggled\n   * by Vue.js.\n   *\n   * You can easily play with the modal transition by editing\n   * these styles.\n   */\n  .modal-enter {\n    opacity: 0;\n  }\n\n  .modal-leave-active {\n    opacity: 0;\n  }\n\n  .modal-enter .modal-container,\n  .modal-leave-active .modal-container {\n    -webkit-transform: scale(1.1);\n    transform: scale(1.1);\n  }\n\n  .preview-table td {\n    text-align: right;\n    padding-right: 20px;\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/source-map-loader/index.js!./GwasParserOptions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/source-map-loader/index.js!./GwasParserOptions.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GwasParserOptions.vue?vue&type=template&id=3035afc2&scoped=true&\"\nimport script from \"./GwasParserOptions.vue?vue&type=script&lang=js&\"\nexport * from \"./GwasParserOptions.vue?vue&type=script&lang=js&\"\nimport style0 from \"./GwasParserOptions.vue?vue&type=style&index=0&id=3035afc2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3035afc2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{staticClass:\"form-inline\",on:{\"submit\":function($event){$event.preventDefault();return _vm.selectRegion.apply(null, arguments)}}},[_c('vue-bootstrap-typeahead',{attrs:{\"data\":_vm.search_results,\"serializer\":function (s) { return s.term; },\"min-matching-chars\":3,\"placeholder\":\"chr:start-end, rs, or gene\"},model:{value:(_vm.region),callback:function ($$v) {_vm.region=$$v},expression:\"region\"}}),_c('input',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"submit\",\"value\":\"Go to region\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <form class=\"form-inline\" @submit.prevent=\"selectRegion\">\n    <vue-bootstrap-typeahead\n      :data=\"search_results\"\n      v-model=\"region\"\n      :serializer=\"s => s.term\"\n      :min-matching-chars=\"3\"\n      placeholder=\"chr:start-end, rs, or gene\"/>\n    <input\n      class=\"btn btn-primary\"\n      type=\"submit\"\n      value=\"Go to region\">\n  </form>\n</template>\n\n<script>\nimport debounce from 'lodash/debounce';\nimport VueBootstrapTypeahead from 'vue-bootstrap-typeahead/src/components/VueBootstrapTypeahead.vue';\n\nimport { parseRegion, positionToMidRange } from '../util/entity-helpers';\n\nexport default {\n    name: 'RegionPicker',\n    components: { VueBootstrapTypeahead },\n    props: {\n        max_range: {\n            type: Number,\n            default: 500000,\n        },\n        search_url: {\n            type: String,\n            default: 'https://portaldev.sph.umich.edu/api/v1/annotation/omnisearch/',\n        },\n        genome_build: {\n            type: String,\n            required: true,\n        },\n    },\n    data() {\n        return {\n            region: null,\n            search_results: [],\n        };\n    },\n    watch: {\n        region: debounce(function () {\n            this.doSearch();\n        }, 500),\n    },\n    methods: {\n        selectRegion() {\n            const { max_range } = this;\n            if (!this.region) {\n                this.$emit('fail', 'Please specify a region');\n                return;\n            }\n\n            let chr;\n            let start;\n            let end;\n            const search_result = this.search_results.find((item) => this.region === item.term);\n            if (search_result) {\n                // For genes and rsids, the suggested range is often too narrow.\n                //   Pick a region centered on the midpoint of the range.\n                ({ chrom: chr, start, end } = search_result);\n                [start, end] = positionToMidRange((start + end) / 2, { region_size: max_range });\n            } else {\n                try {\n                    ({ chr, start, end } = parseRegion(this.region, { region_size: max_range }));\n                } catch (e) {\n                    this.$emit('fail', e);\n                    return;\n                }\n            }\n            this.$emit('ready', { chr, start, end });\n        },\n        doSearch() {\n            this.search_results = [];\n            const url = `${this.search_url}?q=${encodeURIComponent(this.region)}&build=${encodeURIComponent(this.genome_build)}`;\n            fetch(url)\n                .then((resp) => {\n                    if (resp.ok) {\n                        return resp.json();\n                    }\n                    throw new Error('Server error');\n                })\n                .then((data) => {\n                    // Limit the API response to a set of valid, and useful, search results\n                    //   (omnisearch does some things we don't need)\n                    this.search_results = data.data.filter((item) => !item.error && (item.type !== 'region'));\n                })\n                .catch(() => this.$emit('fail', 'Could not perform the specified search'));\n        },\n    },\n};\n</script>\n\n<style scoped>\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/source-map-loader/index.js!./RegionPicker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/source-map-loader/index.js!./RegionPicker.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RegionPicker.vue?vue&type=template&id=1cafa324&scoped=true&\"\nimport script from \"./RegionPicker.vue?vue&type=script&lang=js&\"\nexport * from \"./RegionPicker.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1cafa324\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-dropdown',{ref:\"options_dropdown\",attrs:{\"lazy\":true,\"variant\":\"success\"},scopedSlots:_vm._u([{key:\"button-content\",fn:function(){return [_c('span',{directives:[{name:\"v-b-tooltip\",rawName:\"v-v-b-tooltip.right\",value:('This will plot data from local files. Nothing will be uploaded and these tracks will disappear when the page reloads.'),expression:\"'This will plot data from local files. Nothing will be uploaded and these tracks will disappear when the page reloads.'\",modifiers:{\"right\":true}}]},[_vm._v(\"Add tabix-indexed datafile\")])]},proxy:true}])},[_c('div',{staticClass:\"px-3\",staticStyle:{\"width\":\"300px\"}},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.createReader.apply(null, arguments)}}},[_c('b-form-group',{attrs:{\"label\":\"Data source\"}},[_c('b-form-radio-group',{attrs:{\"id\":\"tabix-location\",\"options\":[{text: 'File', value: 'file'}, {text: 'URL', value: 'url'}],\"name\":\"tabix-location\"},model:{value:(_vm.tabix_mode),callback:function ($$v) {_vm.tabix_mode=$$v},expression:\"tabix_mode\"}})],1),(_vm.tabix_mode === 'file')?[_c('input',{ref:\"file_picker\",staticClass:\"form-control\",attrs:{\"required\":_vm.tabix_mode === 'file',\"type\":\"file\",\"multiple\":\"\",\"accept\":\"application/gzip,.tbi\"},on:{\"change\":_vm.updateDisplayName}})]:[_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.tabix_gz_url),expression:\"tabix_gz_url\",modifiers:{\"trim\":true}}],staticClass:\"form-control\",attrs:{\"required\":_vm.tabix_mode === 'url',\"type\":\"url\",\"placeholder\":\"Specify URL...\"},domProps:{\"value\":(_vm.tabix_gz_url)},on:{\"blur\":[_vm.updateDisplayName,function($event){return _vm.$forceUpdate()}],\"input\":function($event){if($event.target.composing){ return; }_vm.tabix_gz_url=$event.target.value.trim()}}})],_c('br'),_c('b-form-group',{attrs:{\"label\":\"Type\"}},[_c('b-form-radio',{attrs:{\"name\":\"data-type\",\"value\":\"gwas\"},model:{value:(_vm.data_type),callback:function ($$v) {_vm.data_type=$$v},expression:\"data_type\"}},[_vm._v(\"\\n            GWAS scatter plot (\"),_c('small',[_c('a',{attrs:{\"href\":\"https://my.locuszoom.org/about/#prepare-data\",\"target\":\"_blank\"}},[_vm._v(\"suggested fields\")])]),_vm._v(\")\\n          \")]),_c('b-form-radio',{attrs:{\"name\":\"data-type\",\"value\":\"bed\"},model:{value:(_vm.data_type),callback:function ($$v) {_vm.data_type=$$v},expression:\"data_type\"}},[_vm._v(\"\\n            BED 4+ intervals \"),_c('small',[_vm._v(\"(\"),_c('a',{attrs:{\"href\":\"https://genome.ucsc.edu/FAQ/FAQformat.html#format1\",\"target\":\"_blank\"}},[_vm._v(\"file format\")]),_vm._v(\")\")])]),(_vm.allow_ld)?_c('b-form-radio',{attrs:{\"name\":\"data-type\",\"value\":\"plink_ld\"},model:{value:(_vm.data_type),callback:function ($$v) {_vm.data_type=$$v},expression:\"data_type\"}},[_vm._v(\"\\n            PLINK 1.9 LD (overlay on GWAS; see \"),_c('a',{attrs:{\"target\":\"_blank\",\"href\":\"https://statgen.github.io/localzoom#instructions\"}},[_vm._v(\"instructions\")]),_vm._v(\")\\n          \")]):_vm._e()],1),_c('b-form-group',{attrs:{\"label\":\"Track Label\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.display_name),expression:\"display_name\",modifiers:{\"trim\":true}}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"required\":\"\"},domProps:{\"value\":(_vm.display_name)},on:{\"blur\":[_vm.updateDisplayName,function($event){return _vm.$forceUpdate()}],\"input\":function($event){if($event.target.composing){ return; }_vm.display_name=$event.target.value.trim()}}})]),_c('input',{staticClass:\"btn btn-success\",attrs:{\"type\":\"submit\",\"value\":\"Add dataset\"}})],2)])]),(_vm.show_gwas_modal)?_c('gwas-parser-options',{attrs:{\"file_reader\":_vm.tabix_reader},on:{\"ready\":_vm.receiveGwasOptions,\"close\":function($event){_vm.show_gwas_modal = false}}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\n/**\n * Add tabixed data (from file or URL), along with a tag identifying the type of data to be added\n */\nimport { BDropdown, BFormGroup, BFormRadio, BFormRadioGroup } from 'bootstrap-vue/src/';\nimport { makeBed12Parser, makeGWASParser, makePlinkLdParser } from 'locuszoom/esm/ext/lz-parsers';\nimport { blobReader, urlReader } from 'tabix-reader';\n\nimport GwasParserOptions from './GwasParserOptions.vue';\nimport { DATA_TYPES } from '../util/constants';\nimport { positionToStartRange } from '../util/entity-helpers';\nimport { VBTooltip } from 'bootstrap-vue/src/';\n\n\nexport default {\n    name: 'TabixAdder',\n    components: { BDropdown, BFormGroup, BFormRadio, BFormRadioGroup, GwasParserOptions },\n    directives: { VBTooltip },\n    props: {\n        // Allow the user to add custom LD\n        allow_ld: { type: Boolean, default: false },\n    },\n    data() {\n        return {\n            tabix_mode: 'file',\n            display_name: '',\n            data_type: DATA_TYPES.GWAS,\n            tabix_gz_url: '',\n            // Options required to pass props to the GWAS modal\n            filename: '',\n            show_gwas_modal: false,\n            tabix_reader: null,\n        };\n    },\n    beforeCreate() {\n        this.DATA_TYPES = DATA_TYPES;\n    },\n    methods: {\n        reset() {\n            // Note: Deliberately don't reset datatype, for workflows of \"add more of the same\"\n            // User input fields\n            this.display_name = '';\n            this.tabix_gz_url = '';\n\n            // Things used internally\n            this.filename = '';\n            this.tabix_reader = null;\n            this.show_gwas_modal = false;\n        },\n\n        updateDisplayName() {\n            const  {display_name, tabix_mode, tabix_gz_url} = this;\n            if (display_name) {\n                // Only auto-suggest a display name if one was not already entered\n                return;\n            }\n\n            let short_name;\n            if (tabix_mode === 'file') {\n                const { files } = this.$refs.file_picker;\n                if (!files.length) {\n                    return;\n                }\n                let base_name = files[0].name;\n                short_name = (base_name.substring(0, base_name.lastIndexOf('.')) || base_name);\n            } else if (tabix_mode === 'url') {\n                if (!tabix_gz_url) {\n                    return;\n                }\n                try {\n                    short_name = new URL(tabix_gz_url).pathname.split('/').pop().replace(/\\.gz|.bgz|\\.tbi/gi, '');\n                } catch (e) {\n                    // Form validation should handle malformed URLs\n                    return;\n                }\n                short_name = short_name !== '/' ? short_name : tabix_gz_url;\n            }\n            this.display_name = short_name;\n        },\n\n        _fromURL() {\n            const { tabix_gz_url } = this;\n            const index_url = `${tabix_gz_url}.tbi`;\n            // Suggested dataset label is last part of url path, stripped of file extensions\n            const name = tabix_gz_url.split('/').pop().replace(/\\.gz|.bgz|\\.tbi/gi, '');\n            return urlReader(tabix_gz_url, index_url)\n                .then((reader) => [reader, name]);\n        },\n\n        _fromFile() {\n            const { files } = this.$refs.file_picker;\n\n            let tabix_file;\n            let gwas_file;\n            for (let i = 0; i < files.length; i++) {\n                const f = files.item(i);\n                if (f.name.endsWith('.tbi')) {\n                    tabix_file = f;\n                } else {\n                    gwas_file = f;\n                }\n            }\n            if (files.length !== 2 || !tabix_file) {\n                return Promise.reject('Must select two files: gzipped data and accompanying tabix index');\n            }\n            const name = tabix_file.name.replace(/\\.gz|\\.tbi/gi, '');\n            return blobReader(gwas_file, tabix_file)\n                .then((reader) => [reader, name]);\n        },\n\n        suggestRegion(data_type, reader, parser) {\n            // Note; the GWAS modal does this for GWAS data internally.\n            return new Promise((resolve, reject) => {\n                if (data_type === DATA_TYPES.BED) {\n                    // 1. Find headers (has tabs, does not begin with \"browser\", \"track\", or comment mark)\n                    // 2. Get first data row and return the coordinates for that row. This method assumes the LZ parser with field names according to UCSC BED spec\n                    const header_prefixes = /^(browser | track |#)/;\n                    const _isBedHeader = (text) => !text.includes('\\t') || header_prefixes.test(text);\n                    const data_callback = (rows, err) => {\n                        let valid_file = true;\n                        if (!rows.length || err) {\n                            valid_file = false;\n                        }\n                        // Some tabix files manually specify rows to skip (-S); otherwise tabix auto-ignores `#` lines and we need to figure out what the headers are manually\n                        let first_data_index = reader.skip ? reader.skip : rows.findIndex((text) => !_isBedHeader(text));\n                        if (!valid_file || first_data_index === -1) {\n                            reject('Could not find data rows. Check that file is non-empty and tbi is valid');\n                        }\n                        let first_row = rows[first_data_index];\n                        try {\n                            first_row = parser(first_row);\n                        } catch (e) {\n                            // eslint-disable-next-line no-console\n                            console.error(`Could not parse BED file. Error message below: \\n${e}`);\n                            console.error(e);\n                            reject('Parse error. See JS console for details.');\n                        }\n                        let { chrom: chr, chromStart: start, chromEnd: end } = first_row;\n                        [start, end] = positionToStartRange((start + end) / 2);\n\n                        resolve({chr, start, end});\n                    };\n\n                    reader.fetchHeader(data_callback, {\n                        nLines: 30,\n                        metaOnly: false,\n                    });\n                } else {\n                    // Not implemented for other datatypes\n                    resolve({});\n                }\n            });\n        },\n\n        createReader(event) {\n            // Create a reader when the form is submitted. Emit EITHER:\n            //  - Success: (datatype, reader, filename, label)\n            //  - Failure: Text error message to display\n            // Send a reader instance based on local/remote and filetype config options\n            event.target.checkValidity();\n\n            const { tabix_mode, data_type, display_name } = this;\n            let reader_promise;\n            if (tabix_mode === 'file') {\n                reader_promise = this._fromFile();\n            } else if (tabix_mode === 'url') {\n                reader_promise = this._fromURL();\n            } else {\n                throw new Error('Cannot create reader from unknown mode');\n            }\n\n            reader_promise.then(([reader, filename]) => {\n                if (data_type === DATA_TYPES.GWAS) {\n                    // GWAS files are very messy, and so knowing where to find the file is not enough.\n                    // After receiving the reader, we need to ask the user how to parse the file. (via UI)\n                    if (filename.includes('.bed') || filename.includes('.ld')) {\n                        // Check in case the user does something unwise. (2500 unique BED lines would be bad!)\n                        throw new Error('Wrong file extension for selected data type \"GWAS\"');\n                    }\n                    this.filename = filename;\n                    this.tabix_reader = reader;\n                    this.show_gwas_modal = true;\n                } else {\n                    // All other data types are quasi-standardized, and hence we can declare this\n                    //  new track immediately after verifying that a valid reader exists\n                    let parser;\n                    if (data_type === DATA_TYPES.BED) {\n                        parser = makeBed12Parser({normalize: true});\n                        if (!filename.includes('.bed')) {\n                            throw new Error('BED interval file names must include extension .bed');\n                        }\n                    } else if (data_type === DATA_TYPES.PLINK_LD) {\n                        parser = makePlinkLdParser({normalize: true});\n                        if (!filename.includes('.ld')) {\n                            throw new Error('User PLINK LD file names must include extension .ld');\n                        }\n                    } else {\n                        throw new Error('Unrecognized datatype');\n                    }\n                    return this.suggestRegion(data_type, reader, parser)\n                        .then((region_config) => {\n                            this.sendTrackOptions(data_type, reader, parser, filename, display_name, region_config);\n                            this.reset();\n                        });\n                }\n            }).catch((err) => {\n                this.$emit('fail', err);\n                this.reset();\n            }).finally(() => {\n                this.$refs.options_dropdown.hide();\n            });\n        },\n\n        receiveGwasOptions(parser_config, region_config) {\n            const { tabix_reader, filename, display_name } = this;\n            // Receive GWAS options and declare a new track for this datatype\n            const parser = makeGWASParser(parser_config);\n            this.sendTrackOptions(DATA_TYPES.GWAS, tabix_reader, parser, filename, display_name, region_config);\n            this.reset();\n        },\n\n        sendTrackOptions(data_type, reader, parser, filename, display_name, metadata = {}) {\n            this.$emit('ready', ...arguments);\n            this.reset();\n        },\n    },\n};\n</script>\n\n<template>\n  <div>\n    <b-dropdown\n      ref=\"options_dropdown\"\n      :lazy=\"true\"\n      variant=\"success\"\n    >\n      <template #button-content>\n        <span v-v-b-tooltip.right=\"'This will plot data from local files. Nothing will be uploaded and these tracks will disappear when the page reloads.'\">Add tabix-indexed datafile</span>\n      </template>\n\n      <div\n        class=\"px-3\"\n        style=\"width: 300px;\">\n        <form @submit.prevent=\"createReader\">\n          <b-form-group label=\"Data source\">\n            <b-form-radio-group\n              id=\"tabix-location\"\n              v-model=\"tabix_mode\"\n              :options=\"[{text: 'File', value: 'file'}, {text: 'URL', value: 'url'}]\"\n              name=\"tabix-location\"\n            />\n          </b-form-group>\n\n          <template v-if=\"tabix_mode === 'file'\">\n            <input\n              ref=\"file_picker\"\n              :required=\"tabix_mode === 'file'\"\n              type=\"file\"\n              multiple\n              accept=\"application/gzip,.tbi\"\n              class=\"form-control\"\n              @change=\"updateDisplayName\"\n            >\n          </template>\n          <template v-else>\n            <input\n              v-model.trim=\"tabix_gz_url\"\n              :required=\"tabix_mode === 'url'\"\n              type=\"url\"\n              class=\"form-control\"\n              placeholder=\"Specify URL...\"\n              @blur=\"updateDisplayName\"\n            >\n          </template><br>\n\n          <b-form-group label=\"Type\">\n            <b-form-radio\n              v-model=\"data_type\"\n              name=\"data-type\"\n              value=\"gwas\"\n            >\n              GWAS scatter plot (<small><a\n                href=\"https://my.locuszoom.org/about/#prepare-data\"\n                target=\"_blank\"\n              >suggested fields</a></small>)\n            </b-form-radio>\n            <b-form-radio\n              v-model=\"data_type\"\n              name=\"data-type\"\n              value=\"bed\"\n            >\n              BED 4+ intervals <small>(<a\n                href=\"https://genome.ucsc.edu/FAQ/FAQformat.html#format1\"\n                target=\"_blank\"\n              >file format</a>)</small>\n            </b-form-radio>\n            <b-form-radio\n              v-if=\"allow_ld\"\n              v-model=\"data_type\"\n              name=\"data-type\"\n              value=\"plink_ld\"\n            >\n              PLINK 1.9 LD (overlay on GWAS; see <a target=\"_blank\" href=\"https://statgen.github.io/localzoom#instructions\">instructions</a>)\n            </b-form-radio>\n          </b-form-group>\n\n          <b-form-group label=\"Track Label\">\n            <input\n              v-model.trim=\"display_name\"\n              type=\"text\"\n              required\n              class=\"form-control\"\n              @blur=\"updateDisplayName\"\n            >\n          </b-form-group>\n\n          <input\n            type=\"submit\"\n            class=\"btn btn-success\"\n            value=\"Add dataset\">\n        </form>\n      </div>\n    </b-dropdown>\n    <gwas-parser-options\n      v-if=\"show_gwas_modal\"\n      :file_reader=\"tabix_reader\"\n      @ready=\"receiveGwasOptions\"\n      @close=\"show_gwas_modal = false\"/>\n  </div>\n</template>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/source-map-loader/index.js!./TabixAdder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/source-map-loader/index.js!./TabixAdder.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TabixAdder.vue?vue&type=template&id=44259b7c&\"\nimport script from \"./TabixAdder.vue?vue&type=script&lang=js&\"\nexport * from \"./TabixAdder.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport { BDropdown } from 'bootstrap-vue/src/';\n\nimport BatchSpec from './BatchSpec.vue';\nimport BatchScroller from './BatchScroller.vue';\nimport GwasParserOptions from './GwasParserOptions.vue';\nimport RegionPicker from './RegionPicker.vue';\nimport TabixAdder from './TabixAdder.vue';\n\nimport { createStudySources, createStudyLayouts } from '../util/lz-helpers';\n\nconst MAX_REGION_SIZE = 1000000;\n\nexport default {\n    name: 'GwasToolbar',\n    components: {\n        BDropdown,\n        GwasParserOptions,\n        BatchScroller,\n        BatchSpec,\n        RegionPicker,\n        TabixAdder,\n    },\n    props: {\n        genome_build: {\n            type: String,\n            default: 'GRCh37',\n        },\n        // Limit how many studies can be added (due to browser performance)\n        max_studies: {\n            type: Number,\n            default: 6,\n        },\n        // Track a list of studies that were added to the plot. Useful to prevent duplicates.\n        known_tracks: {\n            type: Array,\n            default: () => [], // Each item is object of form { type, filename, display_name }\n        },\n        // Get a list of suggested entries for batch mode (useful in my.locuszoom.org, which pre-calculates top loci genome wide)\n        //  Should fetch pre-computed top loci, and return list of [ {chr, start, end} ] entries\n        batch_region_getter: { type: Function, default: null },\n    },\n    data() {\n        return {\n            // make constant available\n            max_region_size: MAX_REGION_SIZE,\n\n            // Control display of success/failure messages from this or child components\n            message: '',\n            message_class: '',\n\n            // Controls for \"batch view\" mode\n            batch_mode_active: false,\n            batch_mode_regions: [],\n        };\n    },\n    computed: {\n        study_count() {\n            return this.known_tracks.length;\n        },\n        // Certain props are passed in with sync bindings (this component is intended to modify its parent).\n        //   Allow form to mirror parent state without weird errors.\n        i_genome_build: {\n            get: function() {\n                return this.genome_build;\n            },\n            set: function(newValue) {\n                this.$emit('update:genome_build', newValue);\n            },\n        },\n    },\n    methods: {\n        reset() {\n            // Reset state in the component TODO: Why are we setting batch mode when a track is added? Also how?\n            this.batch_mode_active = false;\n            this.batch_mode_regions = [];\n            this.showMessage('', '');\n        },\n\n        showMessage(message, style = 'text-danger') {\n            this.message = message;\n            this.message_class = style;\n        },\n\n        selectRange(config) {\n            this.showMessage('', '');\n            this.$emit('select-range', config);\n        },\n\n        /**\n         * Adding a new tabix reader track can go through one of two workflows:\n         *   - How to parse the file can be inferred from type; render immediately\n         *   -\n         */\n        receiveTabixReader(data_type, reader, parser_func, filename, display_name, metadata) {\n            this.showMessage('');\n\n            const already_exists = this.known_tracks.find(({data_type: kt, filename: kf}) => kf === filename && kt === data_type);\n            if (already_exists) {\n                this.showMessage('A study with this name has already been added to the plot');\n                return;\n            }\n\n            const { genome_build } = this;\n\n\n            const track_sources = createStudySources(data_type, reader, filename, parser_func);\n            const panel_layouts = createStudyLayouts(data_type, filename, display_name);\n            const new_plot_state = { genome_build, ...metadata };\n\n            this.$emit('add-tabix-track', data_type, filename, display_name, track_sources, panel_layouts, new_plot_state);\n            this.reset();\n        },\n\n        activateBatchMode(regions) {\n            this.batch_mode_active = true;\n            this.batch_mode_regions = regions;\n        },\n    },\n};\n</script>\n\n<template>\n  <div>\n    <div class=\"row\">\n      <div\n        v-if=\"!batch_mode_active\"\n        class=\"col-sm-6\">\n        <div v-if=\"study_count < max_studies\">\n          <tabix-adder\n            :allow_ld=\"study_count > 0\"\n            @ready=\"receiveTabixReader\"\n            @fail=\"showMessage\"\n          />\n        </div>\n      </div>\n      <div\n        v-if=\"!batch_mode_active\"\n        class=\"col-sm-6\">\n        <div\n          v-if=\"study_count\"\n          class=\"d-flex justify-content-end\">\n          <region-picker\n            :genome_build=\"genome_build\"\n            :max_range=\"max_region_size\"\n            search_url=\"https://portaldev.sph.umich.edu/api/v1/annotation/omnisearch/\"\n            @ready=\"selectRange\"\n            @fail=\"showMessage\"/>\n          <batch-spec\n            :max_range=\"max_region_size\"\n            class=\"ml-1\"\n            @ready=\"activateBatchMode\">\n            <template v-if=\"batch_region_getter\" #preset-button=\"{updateRegions}\">\n              <button class=\"btn btn-warning\" @click=\"updateRegions(batch_region_getter())\">Get top hits</button>\n            </template>\n          </batch-spec>\n        </div>\n        <b-dropdown\n          v-else\n          text=\"Genome Build\"\n          variant=\"info\"\n          class=\"float-right\">\n          <div class=\"px-3\">\n            <div class=\"form-check\">\n              <input\n                id=\"build-37\"\n                v-model=\"i_genome_build\"\n                class=\"form-check-input\"\n                type=\"radio\"\n                name=\"genome_build\"\n                value=\"GRCh37\">\n              <label\n                class=\"form-check-label\"\n                for=\"build-37\">GRCh37</label>\n            </div>\n            <div class=\"form-check\">\n              <input\n                id=\"build-38\"\n                v-model=\"i_genome_build\"\n                class=\"form-check-input\"\n                type=\"radio\"\n                name=\"genome_build\"\n                value=\"GRCh38\">\n              <label\n                class=\"form-check-label\"\n                for=\"build-38\">GRCh38</label>\n            </div>\n          </div>\n        </b-dropdown>\n      </div>\n\n      <div\n        v-if=\"batch_mode_active\"\n        class=\"col-md-12\">\n        <batch-scroller\n          :regions=\"batch_mode_regions\"\n          @navigate=\"selectRange\"\n          @cancel=\"batch_mode_active = false\"/>\n      </div>\n      <div\n        v-if=\"message\"\n        class=\"row\">\n        <div class=\"col-sm-12\"><span :class=\"[message_class]\">{{ message }}</span></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style>\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/source-map-loader/index.js!./GwasToolbar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/source-map-loader/index.js!./GwasToolbar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GwasToolbar.vue?vue&type=template&id=d2018708&\"\nimport script from \"./GwasToolbar.vue?vue&type=script&lang=js&\"\nexport * from \"./GwasToolbar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\n\nimport 'locuszoom/dist/locuszoom.css';\nimport { BCard, BCollapse, VBToggle, BTab, BTabs } from 'bootstrap-vue/src/';\n\nimport {\n    activateUserLD, getBasicSources, getBasicLayout,\n} from './util/lz-helpers';\nimport { count_add_track, count_region_view, setup_feature_metrics } from './util/metrics';\n\nimport PlotPanes from './components/PlotPanes.vue';\nimport GwasToolbar from './components/GwasToolbar.vue';\nimport { DATA_TYPES } from './util/constants';\n\n\nexport default {\n    name: 'LocalZoom',\n    components: {\n        BCollapse,\n        BCard,\n        BTab,\n        BTabs,\n        GwasToolbar,\n        PlotPanes,\n    },\n    directives: { VBToggle },\n    data() {\n        return {\n            // Used to trigger the initial drawing of the plot\n            base_layout: null,\n            base_sources: null,\n\n            // Current position/ shared state\n            chr: null,\n            start: null,\n            end: null,\n\n            // State to be tracked across all components\n            genome_build: 'GRCh37',\n            known_tracks: [],\n        };\n    },\n    computed: {\n        show_instructions() {\n            return window.location.hash.includes('instructions');\n        },\n    },\n    methods: {\n        receiveTrackOptions(data_type, filename, display_name, source_configs, panel_configs, extra_plot_state) {\n            if (!this.known_tracks.length) {\n                // If this is the first track added, allow the new track to suggest a region of interest and navigate there if relevant (mostly just GWAS)\n                this.updateRegion(extra_plot_state);\n\n                this.base_sources = getBasicSources(source_configs);\n                this.base_layout = getBasicLayout(extra_plot_state, panel_configs);\n\n                // Collect metrics for first plot loaded\n                count_region_view();\n            } else {\n                // TODO: We presently ignore extra plot state (like region) when adding new tracks. Revisit for future data types.\n                this.$refs.plotWidget.addStudy(panel_configs, source_configs);\n                if (data_type === DATA_TYPES.PLINK_LD) {\n                    this.$refs.plotWidget.$refs.assoc_plot.callPlot((plot) => {\n                        activateUserLD(plot, display_name);\n                    });\n                }\n            }\n\n            count_add_track(data_type);\n            this.known_tracks.push({data_type, filename, display_name});\n        },\n        activateMetrics() {\n            // After plot is created, initiate metrics capture\n            // TODO: This is a mite finicky; consider further refactoring in the future?\n            this.$refs.plotWidget.$refs.assoc_plot.callPlot(setup_feature_metrics);\n        },\n        updateRegion({ chr, start, end }) {\n            // Receive new region config from toolbar\n            if (!chr || !start || !end) {\n                return;\n            }\n            this.chr = chr;\n            this.start = start;\n            this.end = end;\n        },\n    },\n};\n</script>\n\n<template>\n  <div>\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <h1><strong>LocalZoom: Plot your own data with LocusZoom.js</strong></h1>\n        <hr>\n        <button\n          v-v-b-toggle.instructions\n          class=\"btn btn-link\">Instructions</button>\n        <b-collapse\n          id=\"instructions\"\n          :visible=\"show_instructions\"\n          class=\"mt-1 mb-4\">\n          <b-card>\n            <div class=\"card-text\">\n              <b-tabs card>\n                <b-tab title=\"General\">\n                  <p>\n                    If you have found this tool useful, please cite our paper,\n                    <a href=\"https://doi.org/10.1093/bioinformatics/btab186\" target=\"_blank\">LocusZoom.js:\n                    interactive and embeddable visualization of genetic association study results</a> (Bioinformatics 2021).\n                  </p>\n\n                  <p>\n                    LocalZoom is a tool for generating region association plots via the web browser.\n                    It can be used on any Tabix-indexed file (including those stored on your hard drive), which\n                    makes it useful for sensitive or confidential data. If you are comfortable uploading\n                    your data to a server, consider the <a href=\"https://my.locuszoom.org\">my.locuszoom.org</a> upload service instead,\n                    which provides additional annotation features and does not require you to compress or index your data.\n                    (note that the upload service is limited to files &lt;= 1GB)\n                    LocalZoom relies on four assumptions:\n                  </p>\n                  <ol>\n                    <li>Your data is a text-based, tab-delimited file that has been stored in a compressed format,\n                    and <a href=\"http://www.htslib.org/doc/tabix.html\">indexed using Tabix</a>. The\n                    index file must be in the same path, with the suffix <em>.tbi</em></li>\n                    <li>The data is hosted in a place that is reachable by web browser (eg local files\n                    or a service such as S3)\n                    </li>\n                    <li>If using a remote URL, the host location must support cross-origin byte range requests. (<a\n                      href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Range_requests#Checking_if_a_server_supports_partial_requests\">how\n                      to check</a>) (<a href=\"https://docs.cancergenomicscloud.org/docs/enabling-cross-origin-resource-sharing-cors#CORS\">how to configure cloud storage</a>)\n                    </li>\n                    <li>Your file contains all of the information required to draw a plot (see individual file format instructions for details).</li>\n                  </ol>\n\n                  <p>\n                    This service is designed to efficiently fetch only the data needed for the plot\n                    region of interest. Therefore, it cannot generate summary views that would require\n                    processing the entire file (eg Manhattan plots).\n                  </p>\n\n                  <p>\n                    LD and overlay information is based on a specific human genome build (<strong>build GRCh37</strong>\n                    or <strong>build GRCh38</strong> are supported). Exercise caution when interpreting\n                    plots based on a GWAS with positions from a different build.\n                  </p>\n\n                  <p>\n                    Credible sets are\n                    <a href=\"https://github.com/statgen/gwas-credible-sets/\">calculated</a> based on the\n                    p-values for the displayed region. At the moment this tool does not support\n                    uploading your own custom credible set annotations.\n                  </p>\n                </b-tab>\n\n                <b-tab title=\"GWAS\">\n                  <h3>What data is required?</h3>\n                  <p>\n                    LocalZoom can read GWAS summary statistics from many file formats. When you add a\n                    study, we will attempt to automatically detect the columns for particular fields\n                    of interest, based on heuristic rules derived from several dozen common programs\n                    or file formats. The <a href=\"https://my.locuszoom.org/about/#prepare-data\">required fields</a>\n                    are the same as for my.locuszoom.org, a related tool also developed at UMich.\n                    When you load a file, you will be asked to confirm the auto-determined options.\n                  </p>\n\n                  <h3>How should I prepare my files?</h3>\n                  <p>\n                    We attempt to support many GWAS file formats, and hence there is no single set of\n                    instructions for everyone. Below is a sample command that may be helpful; it is presented as several commands in\n                    a sequence, so that it can be run all at once as part of a data preparation workflow (like snakemake).\n                  </p>\n                  <p>\n                    To support sorting and tabix indexing, your file will need to specify chromosome and position as separate fields, with tab delimiters.\n                    The example below assumes one header row, with chromosome as column 1 and position as column 2.\n                  </p>\n                  <dl>\n                    <dt>Sort file, compress, and tabix-index results</dt>\n                    <dd>\n                      Many programs already output summary statistics sorted by chromosome and position. If your tool does not, then you will need to sort the file before creating a tabix index (tabix is a tool that allows someone to query a file for all data in a contiguous genomic region).\n                      If your data is already sorted, then the \"awk\" step can be omitted, but you will still need to run <i>bgzip</i> and <i>tabix</i>.\n                      Assuming that your chromosome is in column 1 and position in column 2, with one header row (skipped in both the awk \"NR\" command and the tabix --skip-lines flag):<br>\n                      <code>zcat &lt; summstats.tab.gz | awk 'NR&lt;=1{print $0;next}{print $0| \"sort -k1,1V -k2,2n\"}' | bgzip -c &gt; summstats.sorted.tab.gz && tabix -s1 -b 2 -e 2 --skip-lines 1 -f summstats.sorted.tab.gz</code><br>\n                    </dd>\n\n                    <dt>(rarely needed) Converting to tab delimiters</dt>\n                    <dd>\n                      Most modern GWAS programs output tab-delimited results (in each row, columns are separated via a tab character)- this makes it much easier to use popular generic indexing tools like tabix.\n                      Some old programs (such as PLINK 1.x) may generate files that use a different character\n                      (\"space delimited\" or \"fixed width\" formats), and append extra spaces to the start and end of a row.\n                      In the rare case where you need to accommodate such a program, the following command may be helpful to clean up the file format before use:<br>\n                      <code>cat filename.txt | sed 's/^[[:space:]]*//g' | sed 's/[[:space:]]*$//g' | tr -s ' ' '\\t' &gt; > filename.tab</code>\n                    </dd>\n                  </dl>\n                </b-tab>\n\n                <b-tab title=\"BED files\">\n                  <p>\n                    BED files are a <a href=\"https://genome.ucsc.edu/FAQ/FAQformat.html#format1\">standard format</a> with 3-12 columns of data.\n                    The default LocusZoom panel layout for a BED track will use chromosome, position, line name, and (optionally) color\n                    to draw the plot. Score will be shown as a tooltip field (if present); it may have a different meaning and scale\n                    depending on the contents of your BED file. As with any LocusZoom track, custom layouts can be created to render data in different ways, or to use more or\n                    fewer columns based on the data of interest.\n                  </p>\n\n                  <p>\n                    The following command is helpful for preparing BED files for use in the browser:<br>\n                    <code>$ sort -k1,1 -k2,2n input.bed | bgzip &gt; input-sorted.bed.gz && tabix -p bed input-sorted.bed.gz</code><br>\n                    Some BED files will have one or more header rows; in this case, modify the tabix command with: <code>--skip-lines N</code> (where N is the number of headers).\n                  </p>\n                </b-tab>\n\n                <b-tab title=\"PLINK 1.9 LD\">\n                  <h3>Before you begin</h3>\n                  <p>\n                    Although PLINK is targeted as a (historically) popular tool for computing LD,\n                    the file format it generates must be transformed before using in a plot. Read these instructions carefully for help using the data with LocalZoom.\n                    We presently do not support arbitrary file formats, as this is an area of active innovation and there is no single clear standard.\n                    We welcome feedback on generally useful improvements; the current process is rather kludgy!\n                  </p>\n                  <h3>Purpose</h3>\n                  <p>\n                    Linkage Disequilibrium is an important tool for interpreting LocusZoom.js plots. In order to support viewing any\n                    region, most LocusZoom.js usages take advantage of the Michigan LD server to calculate region-based LD relative\n                    to a particular reference variant, based on the well-known 1000G reference panel.\n                  </p>\n\n                  <p>\n                    We recognize that the 1000G reference panel (and its sub-populations) is not suited to all cases, especially for\n                    studies with ancestry-specific results or large numbers of rare variants not represented in a public panel.\n                    For many groups, <a href=\"https://github.com/statgen/LDServer/\">setting up a private LD Server instance</a> is not an option.\n                    As a fallback, we support parsing a file format derived from PLINK 1.9 `--ld-snp` calculations. Instructions\n                    for preparing these files are provided below. <strong>Due to the potential for very large output files, we only\n                    support pre-calculated LD relative to one (or a few) LD reference variants; this means that this feature\n                    requires some advance knowledge of interesting regions in order to be useful.</strong> If the user views any\n                    region that is not near a pre-provided reference variant, they will see grey dots indicating the absence of LD information.\n                    We have intentionally restricted the demo so that this limitation is clear.\n                  </p>\n\n                  <h3>How to run PLINK and format output</h3>\n                  <dl>\n                    <dt><b>Preparing genotype files: harmonizing ID formats</b></dt>\n                    <dd>\n                      LocusZoom typically calculates LD relative to a variant by EPACTS-format specifier (chrom:pos_ref/alt).\n                      However, genotype VCF files have no single standard for how variants are identified, which can make it hard to match the requested variant to the actual data.\n                      Some files are not even internally consistent, which makes it hard to write easy copy-and-paste commands that would work widely\n                      across files. Your file can be transformed to match the tutorial assumptions via common tool and the command below:<br>\n\n                      <code>bcftools annotate -Oz --set-id '%CHROM\\:%POS\\_%REF\\/%ALT' original_vcf.gz &gt; vcfname_epacts_id_format.gz</code><br>\n\n                      <em>In some rare cases (such as <a href=\"https://www.internationalgenome.org/faq/why-are-there-duplicate-calls-in-the-phase-3-call-set\">1000G phase 3</a>), data preparation errors may result in duplicate entries for the same variant. This can break PLINK. A command such as the one below can be used to find these duplicates:<br>\n                        <code>zcat &lt; vcfname_epacts_id_format.gz | cut -f3 | sort | uniq -d</code><br>\n                        They can then be removed using the following command (check the output carefully before using, because reasons for duplicate lines vary widely):\n                      </em><br>\n                      <code>bcftools norm -Oz --rm-dup all vcfname_epacts_id_format.gz &gt; vcfname_epacts_id_format_rmdups.gz</code>\n                    </dd>\n\n                    <dt><b>Calculating LD relative to reference variants</b></dt>\n                    <dd>\n                      The command below will calculate LD relative to (several) variants in a 500 kb region centered around each reference variant.<br>\n                      <code>plink-1.9 --r2 --vcf vcfname_epacts_id_format.gz --ld-window 499999 --ld-window-kb 500 --ld-window-r2 0.0 --ld-snp-list mysnplist.txt</code><br>\n\n                      This command assumes the presence of a file named <em>mysnplist.txt</em>, which contains a series of rows like the example below:<br>\n                      <pre style=\"background: #F4F4F4\">16:53842908_G/A\n16:53797908_C/G\n16:53809247_G/A</pre>\n                    </dd>\n                    <dt><b>Preparing the LD output file for use with LocusZoom.js</b></dt>\n                    <dd>\n                      As of this writing, this tutorial assumes a \"list of SNPs\" feature that requires PLINK 1.9.x (and is not yet available in newer versions).\n                      Unfortunately, PLINK's default output format is not compatible with tabix, for historical reasons.\n                      Transform to a format readable by LocusZoom via the following sequence of commands.<br>\n                      <code>cat plink.ld | tail -n+2 | sed 's/^[[:space:]]*//g' | sed 's/[[:space:]]*$//g' | tr -s ' ' '\\t' | sort -k4,4 -k5,5n | bgzip &gt; plink.ld.tab.gz && tabix -s4 -b5 -e5 plink.ld.tab.gz</code>\n                    </dd>\n\n                    <dt><b>I don't use PLINK; how should my file be formatted?</b></dt>\n                    <dd>\n                      A custom LD file should be tab-delimited. It should specify a reference variant (\"SNP_A\") and LD for all others relative to that variant (\"SNP_B\"). The first two rows will look like the following example, taken from actual PLINK output:\n                      <pre style=\"background: #F4F4F4\">CHR_A&#9;BP_A&#9;SNP_A&#9;CHR_B&#9;BP_B&#9;SNP_B&#9;R2\n22&#9;37470224&#9;22:37470224_T/C&#9;22&#9;37370297&#9;22:37370297_T/C&#9;0.000178517</pre>\n\n                      <em>Note: pre-calculated LD files can easily become very large. We recommend only outputting LD relative to a few target reference variants at a time.</em>\n                    </dd>\n                  </dl>\n                </b-tab>\n              </b-tabs>\n            </div>\n          </b-card>\n        </b-collapse>\n      </div>\n    </div>\n\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <gwas-toolbar\n          :genome_build.sync=\"genome_build\"\n          :max_studies=\"6\"\n          :known_tracks=\"known_tracks\"\n          @add-tabix-track=\"receiveTrackOptions\"\n          @select-range=\"updateRegion\"/>\n      </div>\n    </div>\n\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <plot-panes\n          ref=\"plotWidget\"\n          :base_layout=\"base_layout\"\n          :base_sources=\"base_sources\"\n          :dynamic_urls=\"true\"\n          :genome_build=\"genome_build\"\n          :known_tracks=\"known_tracks\"\n          :chr=\"chr\"\n          :start=\"start\"\n          :end=\"end\"\n          @plot-created=\"activateMetrics\"\n        />\n      </div>\n    </div>\n\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <footer style=\"text-align: center;\">\n          &copy; Copyright {{ new Date().getFullYear() }} <a href=\"https://github.com/statgen\">The University of Michigan\n          Center for Statistical Genetics</a><br>\n        </footer>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped></style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/source-map-loader/index.js!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/source-map-loader/index.js!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=01023cd1&scoped=true&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"01023cd1\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\n\nimport * as Sentry from '@sentry/browser';\n\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'bootstrap-vue/dist/bootstrap-vue.css';\n\nimport App from './App.vue';\n\nSentry.init({\n    dsn: process.env.VUE_APP_SENTRY_DSN,\n    integrations: [new Sentry.Integrations.Vue({ Vue })],\n});\n\nnew Vue({ render: (h) => h(App) })\n    .$mount('#app');\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GwasParserOptions.vue?vue&type=style&index=0&id=3035afc2&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlotPanes.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PhewasMaker.vue?vue&type=style&index=0&id=0bee02fc&scoped=true&lang=css&\""],"sourceRoot":""}